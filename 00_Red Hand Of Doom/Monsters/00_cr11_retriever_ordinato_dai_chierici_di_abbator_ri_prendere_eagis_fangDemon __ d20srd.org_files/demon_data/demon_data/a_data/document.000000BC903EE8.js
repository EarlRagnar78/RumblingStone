window._bannerflow.registerModule('000000BC903EE8',(Color)=>{const preloadAssets=[{type:'font',id:'63e10f336224cd6b6340dc07',value:{id:"63e10f336224cd6b6340dc07",src:"https://c.bannerflow.net/fs/api/v2/font?u=https%3A%2F%2Ffonts.bannerflow.net%2Ffontmanagerfonts%2F5e55163690c3a51d28cd4986%2Fa7f3c79f-6e75-4b61-b7ae-54a23c682f4e.woff&t=%20%2B18GPRabceilmnoprsty%7C",weight:400,style:"normal",fontFamilyId:"63e10f3b6224cd6b6340dc0d"}},{type:'font',id:'63e10f336224cd6b6340dbfd',value:{id:"63e10f336224cd6b6340dbfd",src:"https://c.bannerflow.net/fs/api/v2/font?u=https%3A%2F%2Ffonts.bannerflow.net%2Ffontmanagerfonts%2F5e55163690c3a51d28cd4986%2F9299075b-d84a-4a12-ab82-9ccf95ce87d6.woff&t=%0A%2001245ABCEFGHILMNOPQRSTUW%E2%82%AC",weight:900,style:"italic",fontFamilyId:"63e10f3b6224cd6b6340dc0d"}},{type:'font',id:'63e10f336224cd6b6340dc00',value:{id:"63e10f336224cd6b6340dc00",src:"https://c.bannerflow.net/fs/api/v2/font?u=https%3A%2F%2Ffonts.bannerflow.net%2Ffontmanagerfonts%2F5e55163690c3a51d28cd4986%2F0e4550a5-b612-44e0-a5e0-84c7ccfbd43f.woff&t=%20ACEIMORST",weight:800,style:"normal",fontFamilyId:"63e10f3b6224cd6b6340dc0d"}}];const env={FONTSERVICE_API_ORIGIN:'https://c.bannerflow.net/fs',IMAGE_OPTIMIZER_ORIGIN:'https://c.bannerflow.net/io',IN_PRODUCTION:true,FEEDS_STORAGE_ORIGIN:'https://c.bannerflow.net/sfeeds',VIDEOS_STORAGE_ORIGIN:'https://c.bannerflow.net'};const data={id:'2fa2325b-31b5-4b0f-a7c1-010dbd3e810a',kind:'creative',width:728,height:90,loops:0,startTime:0,stopTime:undefined,preloadImage:{frames:[]},fill:Color.parse('rgba(255,255,255,1)'),elements:[{kind:'widget',id:'062e4679-4873-4a23-b271-a527c582c4e5',time:0,hidden:false,duration:12,animations:[],states:[],actions:[],x:0,y:0,width:728,height:90,radius:{"type":"joint","topLeft":0,"topRight":0,"bottomRight":0,"bottomLeft":0},originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{},html:"PGRpdiBpZD0iY29udGFpbmVyIj4KICAgIDxkaXYgaWQ9Imluc3RydWN0aW9ucyI+CiAgICAgICAgPHN0cm9uZz5WaWRlbyBwbGF5ZXI8L3N0cm9uZz48YnI+RW50ZXIgYSBVUkwgaW4gdGhlIFVSTCBwcm9wZXJ0eSBvciBzZWxlY3QgZmVlZCB3aXRoIHZpZGVvIFVSTC4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0icGxheS1wYXVzZS1vdmVybGF5IiBjbGFzcz0ic2hvdy1wbGF5Ij4KICAgICAgICA8c3ZnIGNsYXNzPSJwYXVzZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2NDBweCIgaGVpZ2h0PSI2NDBweCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDY0MCA2NDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+CiAgICAgICAgICAgICAgICA8cmVjdCB4PSItODAiCiAgICAgICAgICAgICAgICAgICAgICAgIHk9Ii04MCIKICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0ibm9uZSIKICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPSIjMDAwMDAwIgogICAgICAgICAgICAgICAgICAgICAgICBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSI4MDAiIAogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjgwMCIgLz4gCiAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICBkPSJNNTQ2LjI3Myw5My43MjZDNDg1LjgzNCwzMy4yODYsNDA1LjQ3NiwwLDMyMCwwQzIzNC41MjUsMCwxNTQuMTY2LDMzLjI4Niw5My43MjYsOTMuNzI2UzAsMjM0LjUyNSwwLDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYzAsODUuNDc2LDMzLjI4NiwxNjUuODM0LDkzLjcyNiwyMjYuMjczQzE1NC4xNjYsNjA2LjcxNCwyMzQuNTI0LDY0MCwzMjAsNjQwczE2NS44MzUtMzMuMjg2LDIyNi4yNzMtOTMuNzI3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDNjA2LjcxNCw0ODUuODM1LDY0MCw0MDUuNDc2LDY0MCwzMjBTNjA2LjcxNCwxNTQuMTY2LDU0Ni4yNzMsOTMuNzI2eiBNMzIwLDU4MkMxNzUuNTMzLDU4Miw1OCw0NjQuNDY3LDU4LDMyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQzU4LDE3NS41MzMsMTc1LjUzMyw1OCwzMjAsNThjMTQ0LjQ2NywwLDI2MiwxMTcuNTMzLDI2MiwyNjJDNTgyLDQ2NC40NjcsNDY0LjQ2Nyw1ODIsMzIwLDU4MnoiIC8+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBkaXNwbGF5PSJub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cz0iMjQzLjI4OSwzMjAgMjQzLjI4OSwxODguNjk4IDM1NywyNTQuMzUgNDcwLjcxMSwzMjAgMzU3LDM4NS42NTEgMjQzLjI4OSw0NTEuMzAyIiAvPgogICAgICAgICAgICAgICAgPGc+CiAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iMzc1IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeT0iMTkyLjg1NCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0iNTIuNDg2IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PSIyNTQuMjkxIiAvPgogICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjIxNSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9IjE5Mi44NTQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9IjUyLjQ4NiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD0iMjU0LjI5MSIgLz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvc3ZnPgogICAgICAgIAogICAgICAgIDxzdmcgY2xhc3M9InBsYXkiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2NDBweCIgaGVpZ2h0PSI2NDBweCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDY0MCA2NDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+CiAgICAgICAgICAgICAgICA8cmVjdCB4PSItODAiCiAgICAgICAgICAgICAgICAgICAgeT0iLTgwIgogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk9Im5vbmUiCiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPSIjMDAwMDAwIgogICAgICAgICAgICAgICAgICAgIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIKICAgICAgICAgICAgICAgICAgICB3aWR0aD0iODAwIgogICAgICAgICAgICAgICAgICAgIGhlaWdodD0iODAwIiAvPgogICAgICAgICAgICAgICAgPHBhdGggZmlsbD0iI0ZGRkZGRiIKICAgICAgICAgICAgICAgICAgICBkPSJNNTQ2LjI3Myw5My43MjZDNDg1LjgzNCwzMy4yODYsNDA1LjQ3NiwwLDMyMCwwQzIzNC41MjUsMCwxNTQuMTY2LDMzLjI4Niw5My43MjYsOTMuNzI2UzAsMjM0LjUyNSwwLDMyMAogICAgICAgICAgICAgICAgICAgICAgICBjMCw4NS40NzYsMzMuMjg2LDE2NS44MzQsOTMuNzI2LDIyNi4yNzNDMTU0LjE2Niw2MDYuNzE0LDIzNC41MjQsNjQwLDMyMCw2NDBzMTY1LjgzNS0zMy4yODYsMjI2LjI3My05My43MjcKICAgICAgICAgICAgICAgICAgICAgICAgQzYwNi43MTQsNDg1LjgzNSw2NDAsNDA1LjQ3Niw2NDAsMzIwUzYwNi43MTQsMTU0LjE2Niw1NDYuMjczLDkzLjcyNnogTTMyMCw1ODJDMTc1LjUzMyw1ODIsNTgsNDY0LjQ2Nyw1OCwzMjAKICAgICAgICAgICAgICAgICAgICAgICAgQzU4LDE3NS41MzMsMTc1LjUzMyw1OCwzMjAsNThjMTQ0LjQ2NywwLDI2MiwxMTcuNTMzLDI2MiwyNjJDNTgyLDQ2NC40NjcsNDY0LjQ2Nyw1ODIsMzIwLDU4MnoiIC8+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICBwb2ludHM9IjI0My4yODksMzIwIDI0My4yODksMTg4LjY5OCAzNTcsMjU0LjM1IDQ3MC43MTEsMzIwIDM1NywzODUuNjUxIDI0My4yODksNDUxLjMwMiIgLz4KICAgICAgICAgICAgICAgIDxnIGRpc3BsYXk9Im5vbmUiPgogICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjM3NSIKICAgICAgICAgICAgICAgICAgICAgICAgeT0iMTkyLjg1NCIKICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheT0iaW5saW5lIgogICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSIjRkZGRkZGIgogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0iNTIuNDg2IgogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjI1NC4yOTEiIC8+CiAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iMjE1IgogICAgICAgICAgICAgICAgICAgICAgICB5PSIxOTIuODU0IgogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5PSJpbmxpbmUiCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9IiNGRkZGRkYiCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPSI1Mi40ODYiCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD0iMjU0LjI5MSIgLz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMiIgCiAgICAgICAgICAgIGRpc3BsYXk9Im5vbmUiPjwvZz4KICAgICAgICA8L3N2Zz4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0idmlkZW8tY29udHJvbHMiPgogICAgICAgIDxkaXYgaWQ9InBsYXliYWNrIiBjbGFzcz0iaXNQYXVzZWQiPgogICAgICAgICAgICA8c3ZnIGNsYXNzPSJpY29uLXBhdXNlIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNjQwIDY0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNjQwIDY0MCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iTGF5ZXJfMSI+PHJlY3QgeD0iLTgwIiB5PSItODAiIGRpc3BsYXk9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiB3aWR0aD0iODAwIiBoZWlnaHQ9IjgwMCIvPjxnPjxyZWN0IHg9IjM3NSIgeT0iMTkyLjg1NCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PHJlY3QgeD0iMjE1IiB5PSIxOTIuODU0IiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTIuNDg2IiBoZWlnaHQ9IjI1NC4yOTEiLz48L2c+PC9nPjxnIGlkPSJMYXllcl8yIiBkaXNwbGF5PSJub25lIj48L2c+PC9zdmc+CiAgICAgICAgICAgIDxzdmcgY2xhc3M9Imljb24tcGxheSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDY0MCA2NDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgICAgICAgICAgICAgPGcgaWQ9IkxheWVyXzEiPjxyZWN0IHg9Ii04MCIgeT0iLTgwIiBkaXNwbGF5PSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgd2lkdGg9IjgwMCIgaGVpZ2h0PSI4MDAiLz48cG9seWdvbiBmaWxsPSIjRkZGRkZGIiBwb2ludHM9IjI0My4yODksMzIwIDI0My4yODksMTg4LjY5OCAzNTcsMjU0LjM1IDQ3MC43MTEsMzIwIDM1NywzODUuNjUxIDI0My4yODksNDUxLjMwMiAiLz48ZyBkaXNwbGF5PSJub25lIj48cmVjdCB4PSIzNzUiIHk9IjE5Mi44NTQiIGRpc3BsYXk9ImlubGluZSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUyLjQ4NiIgaGVpZ2h0PSIyNTQuMjkxIi8+PHJlY3QgeD0iMjE1IiB5PSIxOTIuODU0IiBkaXNwbGF5PSJpbmxpbmUiIGZpbGw9IiNGRkZGRkYiIHdpZHRoPSI1Mi40ODYiIGhlaWdodD0iMjU0LjI5MSIvPjwvZz48L2c+PGcgaWQ9IkxheWVyXzIiIGRpc3BsYXk9Im5vbmUiPjwvZz4KICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBpZD0icHJvZ3Jlc3MtYmFyIj4KICAgICAgICAgICAgPHNwYW4gaWQ9InByb2dyZXNzLXRpbWVyIj48L3NwYW4+CiAgICAgICAgICAgIDxkaXYgaWQ9InByb2dyZXNzIj4KICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJidWZmZXJCYXIiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJ0aW1lQmFyIj48L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9InZvbHVtZSI+CiAgICAgICAgICAgIDxzcGFuIGlkPSJ2b2x1bWUtaWNvbiIgY2xhc3M9InVubXV0ZWQiPgogICAgICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0idW5tdXRlZCI+CiAgICAgICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCA4MTkpIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMjYgNDQxbDI1MiAxODloNjN2LTYzMGgtNjNsLTI1MiAxODloLTEyNnYyNTJoMTI2ek01MzEgNDA1di0xYzI0IC0yNyAzNiAtNTggMzYgLTkwcy0xMiAtNjQgLTM2IC04OWMtMTUgLTE1IC0zMyAtMTEgLTQ0IDFzLTE2IDMwIC0xIDQ1YzI1IDI0IDI1IDY0IDAgODhjLTE1IDE1IC0xMCAzMyAxIDQ1czI5IDE2IDQ0IDF6TTYxOSA0OTJ2LTNjNTEgLTUxIDc0IC0xMTAgNzQgLTE3OHMtMjMgLTEyNyAtNzQgLTE3OCBjLTEzIC0xNSAtMzIgLTExIC00MyAwcy0xNiAzMCAtMSA0NWMzOCAzOSA1NSA4MyA1NSAxMzRzLTE3IDk1IC01NSAxMzRjLTE1IDE1IC0xMCAzNCAxIDQ1czMwIDE0IDQzIDF6TTcwOSA1Nzl2NGM3NCAtNzggMTEwIC0xNjYgMTEwIC0yNjhzLTM2IC0xOTAgLTExMCAtMjY4Yy0xNSAtMTUgLTMzIC0xMSAtNDQgMHMtMTYgMzAgLTEgNDVjNjQgNjQgOTMgMTM3IDkzIDIyMXMtMjkgMTU3IC05MyAyMjFjLTE1IDE1IC0xMCAzNCAxIDQ1IHMyOSAxNSA0NCAweiIvPjwvZz4KICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9Ii0xMDAgLTAgMTAwMCAxMDAwIiBjbGFzcz0ibXV0ZWQiPgogICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgODE5KSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTI2IDQ0MWwyNTIgMTg5aDYzdi02MzBoLTYzbC0yNTIgMTg5aC0xMjZ2MjUyaDEyNnpNODUxIDQxMGwtOTUgLTk1bDk1IC05NGwtNjMgLTYzbC05NSA5NGwtOTQgLTk0bC02MyA2M2w5NCA5NGwtOTQgOTVsNjMgNjNsOTQgLTk1bDk1IDk1eiIvPjwvZz4KICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgIDxkaXYgaWQ9InZvbHVtZS1jb250cm9sbGVyIj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InZvbHVtZS12YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9ImZ1bGxzY3JlZW4iPgogICAgICAgICAgICA8c3ZnIHZpZXdCb3g9IjAgMCAxNzkyIDE3OTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQxMSA1NDFsLTM1NSAzNTUgMzU1IDM1NSAxNDQtMTQ0cTI5LTMxIDcwLTE0IDM5IDE3IDM5IDU5djQ0OHEwIDI2LTE5IDQ1dC00NSAxOWgtNDQ4cS00MiAwLTU5LTQwLTE3LTM5IDE0LTY5bDE0NC0xNDQtMzU1LTM1NS0zNTUgMzU1IDE0NCAxNDRxMzEgMzAgMTQgNjktMTcgNDAtNTkgNDBoLTQ0OHEtMjYgMC00NS0xOXQtMTktNDV2LTQ0OHEwLTQyIDQwLTU5IDM5LTE3IDY5IDE0bDE0NCAxNDQgMzU1LTM1NS0zNTUtMzU1LTE0NCAxNDRxLTE5IDE5LTQ1IDE5LTEyIDAtMjQtNS00MC0xNy00MC01OXYtNDQ4cTAtMjYgMTktNDV0NDUtMTloNDQ4cTQyIDAgNTkgNDAgMTcgMzktMTQgNjlsLTE0NCAxNDQgMzU1IDM1NSAzNTUtMzU1LTE0NC0xNDRxLTMxLTMwLTE0LTY5IDE3LTQwIDU5LTQwaDQ0OHEyNiAwIDQ1IDE5dDE5IDQ1djQ0OHEwIDQyLTM5IDU5LTEzIDUtMjUgNS0yNiAwLTQ1LTE5eiIgZmlsbD0iI2ZmZiIvPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0icG9zdGVyIj48L2Rpdj4KICAgIDxzcGFuIGlkPSJ2b2x1bWVUb2dnbGUiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJ1bm11dGVkIj4KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCA4MTkpIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMjYgNDQxbDI1MiAxODloNjN2LTYzMGgtNjNsLTI1MiAxODloLTEyNnYyNTJoMTI2ek01MzEgNDA1di0xYzI0IC0yNyAzNiAtNTggMzYgLTkwcy0xMiAtNjQgLTM2IC04OWMtMTUgLTE1IC0zMyAtMTEgLTQ0IDFzLTE2IDMwIC0xIDQ1YzI1IDI0IDI1IDY0IDAgODhjLTE1IDE1IC0xMCAzMyAxIDQ1czI5IDE2IDQ0IDF6TTYxOSA0OTJ2LTNjNTEgLTUxIDc0IC0xMTAgNzQgLTE3OHMtMjMgLTEyNyAtNzQgLTE3OCBjLTEzIC0xNSAtMzIgLTExIC00MyAwcy0xNiAzMCAtMSA0NWMzOCAzOSA1NSA4MyA1NSAxMzRzLTE3IDk1IC01NSAxMzRjLTE1IDE1IC0xMCAzNCAxIDQ1czMwIDE0IDQzIDF6TTcwOSA1Nzl2NGM3NCAtNzggMTEwIC0xNjYgMTEwIC0yNjhzLTM2IC0xOTAgLTExMCAtMjY4Yy0xNSAtMTUgLTMzIC0xMSAtNDQgMHMtMTYgMzAgLTEgNDVjNjQgNjQgOTMgMTM3IDkzIDIyMXMtMjkgMTU3IC05MyAyMjFjLTE1IDE1IC0xMCAzNCAxIDQ1IHMyOSAxNSA0NCAweiIvPjwvZz4KICAgICAgICA8L3N2Zz4KICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iLTEwMCAtMCAxMDAwIDEwMDAiIGNsYXNzPSJtdXRlZCI+CiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgODE5KSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTI2IDQ0MWwyNTIgMTg5aDYzdi02MzBoLTYzbC0yNTIgMTg5aC0xMjZ2MjUyaDEyNnpNODUxIDQxMGwtOTUgLTk1bDk1IC05NGwtNjMgLTYzbC05NSA5NGwtOTQgLTk0bC02MyA2M2w5NCA5NGwtOTQgOTVsNjMgNjNsOTQgLTk1bDk1IDk1eiIvPjwvZz4KICAgICAgICA8L3N2Zz4KICAgIDwvc3Bhbj4KICAgIDxkaXYgY2xhc3M9InZpZGVvLWhvbGRlciI+PC9kaXY+CjwvZGl2Pgo8c3R5bGUgaWQ9ImN1c3RvbS1zdHlsZXMiPjwvc3R5bGU+",css:"KiB7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQoKaHRtbCB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQpib2R5IHsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItciwgMHB4KTsKICBvdmVyZmxvdzogaGlkZGVuOwp9CiNjb250YWluZXIgewogIG9wYWNpdHk6IDA7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhJywgJ0FyaWFsJywgc2Fucy1zZXJpZjsKICBmb250LXNpemU6IDE2cHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKLnZpZGVvLWhvbGRlciB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIG92ZXJmbG93OiBoaWRkZW47CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9Ci52aWRlby1ob2xkZXIgdmlkZW8jdmlkZW8tcGxheWVyIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgY3Vyc29yOiBwb2ludGVyOwp9Ci52aWRlby1ob2xkZXIgdmlkZW8jdmlkZW8tcGxheWVyLmNvdmVyIHsKICB3aWR0aDogYXV0bzsKICBsZWZ0OiA1MCU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9Ci52aWRlby1ob2xkZXIgdmlkZW8jdmlkZW8tcGxheWVyLmNvdmVyLXggewogIHdpZHRoOiBhdXRvOwogIGhlaWdodDogMTAwJTsKfQoudmlkZW8taG9sZGVyIHZpZGVvI3ZpZGVvLXBsYXllci5jb3Zlci15IHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IGF1dG87Cn0KI3Bvc3RlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgei1pbmRleDogMTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7CiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluOwp9CiNwb3N0ZXIuY292ZXIgewogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7Cn0KLmltYWdlR2VuZXJhdG9yTW9kZSAjcGxheS1wYXVzZS1vdmVybGF5LAouaW1hZ2VHZW5lcmF0b3JNb2RlICN2aWRlby1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNjb250YWluZXI6aG92ZXIgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNjb250YWluZXIuaXNQYXVzZWQgI3ZpZGVvLWNvbnRyb2xzIHsKICBvcGFjaXR5OiAxOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgewogIGRpc3BsYXk6IG5vbmU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiAyOwogIGN1cnNvcjogcG9pbnRlcjsKICBvcGFjaXR5OiAxOwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKfQojcGxheS1wYXVzZS1vdmVybGF5LnNob3cgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuaGlkZSB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wYXVzZSAucGF1c2UgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkuc2hvdy1wbGF5IC5wbGF5IHsKICBkaXNwbGF5OiBibG9jazsKfQojcGxheS1wYXVzZS1vdmVybGF5IHN2ZyB7CiAgZGlzcGxheTogbm9uZTsKICB3aWR0aDogNDAlOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiA1MCU7CiAgdG9wOiA1MCU7CiAgaGVpZ2h0OiBhdXRvOwogIG9wYWNpdHk6IDAuNTsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKICBmaWxsOiByZ2JhKDI1NSwyNTUsMjU1LDAuNSk7CiAgc3Ryb2tlOiByZ2JhKDAsMCwwLDAuNyk7CiAgc3Ryb2tlLXdpZHRoOiAxcHg7CiAgcGFkZGluZzogMnB4OwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDsKfQojcGxheS1wYXVzZS1vdmVybGF5IHN2ZyAqIHsKICBmaWxsOiBpbmhlcml0Owp9CiNwbGF5LXBhdXNlLW92ZXJsYXkgc3ZnOmhvdmVyIHsKICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7Cn0KI3ZpZGVvLWNvbnRyb2xzIHsKICB3aWR0aDogMTAwJTsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNSk7CiAgY29sb3I6ICNmZmY7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvdHRvbTogMHB4OwogIG9wYWNpdHk6IDA7CiAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0OwogIGRpc3BsYXk6IG5vbmU7CiAgei1pbmRleDogMzsKfQojdmlkZW8tY29udHJvbHMuc2hvdyB7CiAgZGlzcGxheTogZmxleDsKfQojdmlkZW8tY29udHJvbHMgPmRpdjpub3QoI3Byb2dyZXNzKSB7CiAgZmxvYXQ6IGxlZnQ7CiAgd2lkdGg6IDI1cHg7CiAgaGVpZ2h0OiAzMHB4OwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CiN2aWRlby1jb250cm9scyA+ZGl2OmJlZm9yZSB7CiAgY29udGVudDogJyc7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGhlaWdodDogMTAwJTsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9CiN2aWRlby1jb250cm9scyBzdmcgewogIHdpZHRoOiAyNXB4OwogIGhlaWdodDogMjVweDsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICBjdXJzb3I6IHBvaW50ZXI7CiAgZmlsbDogI2ZmZjsKfQojcGxheWJhY2sgewogIHdpZHRoOiAzMHB4ICFpbXBvcnRhbnQ7Cn0KI3BsYXliYWNrLmlzUGF1c2VkIC5pY29uLXBsYXkgewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKfQojcGxheWJhY2suaXNQbGF5aW5nIC5pY29uLXBhdXNlIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KI3BsYXliYWNrIC5pY29uLXBhdXNlIHsKICBkaXNwbGF5OiBub25lOwp9CiNwbGF5YmFjayAuaWNvbi1wbGF5IHsKICBkaXNwbGF5OiBub25lOwp9CiNwcm9ncmVzcy1iYXIgewogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWdyb3c6IDU7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CiNwcm9ncmVzcy1iYXIgI3Byb2dyZXNzLXRpbWVyIHsKICB3aWR0aDogODdweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zaXplOiAxMXB4OwogIHBhZGRpbmctcmlnaHQ6IDVweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiA3cHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuNCk7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQojcHJvZ3Jlc3MtYmFyICNwcm9ncmVzcyBzcGFuIHsKICBoZWlnaHQ6IDEwMCU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIGRpc3BsYXk6IGJsb2NrOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7Cn0KI3Byb2dyZXNzLWJhciAjcHJvZ3Jlc3MgI3RpbWVCYXIgewogIHotaW5kZXg6IDEwOwogIHdpZHRoOiAwOwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC44KTsKICBoZWlnaHQ6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICB0cmFuc2l0aW9uOiB3aWR0aCAwLjFzOwp9CiNwcm9ncmVzcy1iYXIgI3Byb2dyZXNzICNidWZmZXJCYXIgewogIHotaW5kZXg6IDU7CiAgd2lkdGg6IDA7CiAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjIpOwp9CiN2b2x1bWUgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBmbGV4LWdyb3c6IDE7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgbWFyZ2luLXJpZ2h0OiA1cHg7Cn0KI3ZvbHVtZS5tb2JpbGUtdm9sdW1lIHsKICBmbGV4LWdyb3c6IDA7Cn0KI3ZvbHVtZSAjdm9sdW1lLXZhbHVlIHsKICB6LWluZGV4OiAxMDsKICB3aWR0aDogMDsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuOCk7CiAgaGVpZ2h0OiAxMDAlOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgdHJhbnNpdGlvbjogd2lkdGggMC4yczsKICBib3JkZXItcmFkaXVzOiAxMHB4Owp9CiN2b2x1bWUgI3ZvbHVtZS1pY29uIHsKICB3aWR0aDogMjVweDsKICBmbG9hdDogbGVmdDsKICBtYXJnaW4tcmlnaHQ6IDNweDsKfQojdm9sdW1lICN2b2x1bWUtY29udHJvbGxlciB7CiAgd2lkdGg6IDgwJTsKICBoZWlnaHQ6IDdweDsKICBmbG9hdDogbGVmdDsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgY3Vyc29yOiBwb2ludGVyOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjQpOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7Cn0KI3ZvbHVtZSAjdm9sdW1lLWljb24gc3ZnIHsKICBkaXNwbGF5OiBub25lOwogIHdpZHRoOiAyMHB4OwogIGhlaWdodDogMjBweDsKfQojdm9sdW1lICN2b2x1bWUtaWNvbi5tdXRlZCBzdmcubXV0ZWQgewogIGRpc3BsYXk6IGJsb2NrOwp9CiN2b2x1bWUgI3ZvbHVtZS1pY29uLnVubXV0ZWQgc3ZnLnVubXV0ZWQgewogIGRpc3BsYXk6IGJsb2NrOwp9CiNmdWxsc2NyZWVuIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CiNmdWxsc2NyZWVuIHN2ZyB7CiAgd2lkdGg6IDE0cHg7CiAgbWFyZ2luLXJpZ2h0OiAzcHg7Cn0KI3ZvbHVtZVRvZ2dsZSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHotaW5kZXg6IDQ7CiAgd2lkdGg6IDEwJTsKICBoZWlnaHQ6IDEwJTsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KI3ZvbHVtZVRvZ2dsZS5tdXRlZCBzdmcubXV0ZWQgewogIGRpc3BsYXk6IGJsb2NrOwp9CiN2b2x1bWVUb2dnbGUudW5tdXRlZCBzdmcudW5tdXRlZCB7CiAgZGlzcGxheTogYmxvY2s7Cn0KI3ZvbHVtZVRvZ2dsZSBzdmcgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBkaXNwbGF5OiBub25lOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBmaWxsOiAjZmZmOwp9CiN2b2x1bWVUb2dnbGUgc3ZnICogewogIGZpbGw6IGluaGVyaXQ7Cn0KQG1lZGlhIChtYXgtd2lkdGg6IDI5MHB4KSB7CiAgI3Byb2dyZXNzLXRpbWVyIHsKICAgIGRpc3BsYXk6IG5vbmU7CiAgfQp9CkBtZWRpYSAobWF4LXdpZHRoOiAyMDBweCkgewogICN2aWRlby1jb250cm9scyAjdm9sdW1lLWljb24gewogICAgd2lkdGg6IGF1dG87CiAgfQogICN2aWRlby1jb250cm9scyAjdm9sdW1lLWNvbnRyb2xsZXIgewogICAgZGlzcGxheTogbm9uZTsKICB9Cn0KI2luc3RydWN0aW9ucyB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHotaW5kZXg6IDk5OwogIGRpc3BsYXk6IG5vbmU7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBwYWRkaW5nOiAxNXB4OwogIGZvbnQtc2l6ZTogMC45cmVtOwogIGNvbG9yOiAjZjdmN2Y3OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICB2ZXJ0aWNhbC1hbGlnbjogY2VudGVyOwogIGJhY2tncm91bmQ6ICMzNjM2MzY7Cn0KCiNpbnN0cnVjdGlvbnMgc3Ryb25nIHsKICBmb250LXNpemU6IDEuMXJlbTsKfQoKI2luc3RydWN0aW9ucy5zaG93IHsKICBkaXNwbGF5OiBmbGV4Owp9Cgp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1mdWxsc2NyZWVuLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scyB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CnZpZGVvOjotd2Via2l0LW1lZGlhLWNvbnRyb2xzLXN0YXJ0LXBsYXliYWNrLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKfQp2aWRlbzo6LWludGVybmFsLW1lZGlhLWNvbnRyb2xzLWRvd25sb2FkLWJ1dHRvbiB7CiAgZGlzcGxheTogbm9uZTsKfQp2aWRlbzo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1lbmNsb3N1cmUgewogIG92ZXJmbG93OiBoaWRkZW47Cn0KdmlkZW86Oi13ZWJraXQtbWVkaWEtY29udHJvbHMtcGFuZWwgewogIHdpZHRoOiBjYWxjKDEwMCUgKyAzMHB4KTsgLyogQWRqdXN0IGFzIG5lZWRlZCAqLwp9CgojcGxheS1wYXVzZS1vdmVybGF5Lm9uSG92ZXIgLnBhdXNlIHsKICBvcGFjaXR5OiAwOwp9CiNwbGF5LXBhdXNlLW92ZXJsYXkub25Ib3ZlciAucGF1c2U6aG92ZXIgewogIG9wYWNpdHk6IDE7Cn0=",js:"dmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7CiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0KICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0KICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9CiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH0KICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7CiAgICB9KTsKfTsKV2lkZ2V0Lm1vdXNlSW50ZXJhY3Rpb25zID0gdHJ1ZTsKbGV0IHZpZGVvOwpsZXQgZmlyc3RQbGF5VGhyb3VnaCA9IHRydWU7CmNvbnN0IHZpZGVvRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlby1ob2xkZXInKTsKY29uc3QgdmlkZW9TZXR0aW5ncyA9IHt9OwpsZXQgaGFzU3RvcHBlZCA9IGZhbHNlOwpsZXQgbXV0ZWRTdGF0ZSA9IHRydWU7CmxldCB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsKY29uc3QgaW5zdHJ1Y3Rpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3RydWN0aW9ucycpOwpjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJyk7CmNvbnN0IGN1c3RvbVN0eWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20tc3R5bGVzJyk7CmxldCBmZWVkLCBmZWVkVXJsOwpsZXQgZmVlZEl0ZXJhdGlvbkluZGV4ID0gMDsKbGV0IGxvY2FsVXJsOwovL3VzZWQgdG8gZGV0ZWN0IGJhdHRlcnkgc2F2aW5nIG1vZGUgb24gaU9TOwpsZXQgcGxheUVycm9yID0gZmFsc2U7CmNvbnN0IHBsYXlQYXVzZU92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheS1wYXVzZS1vdmVybGF5Jyk7Ci8qCioqIEJhbm5lcmZsb3cgZXZlbnRzYAoqLwpsZXQgcHJvbWlzZVJlc29sdmVyOwpXaWRnZXQuaXNMb2FkZWRQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICBwcm9taXNlUmVzb2x2ZXIgPSByZXNvbHZlOwp9KTsKQ3JlYXRpdmUub24oQ3JlYXRpdmVFdmVudC5NdXRlLCAobXV0ZWQpID0+IHsKICAgIGlmICghdmlkZW8pIHsKICAgICAgICByZXR1cm47CiAgICB9CiAgICB2aWRlby50b2dnbGVNdXRlKG11dGVkKTsKfSk7CnRyeSB7CiAgICAoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7CiAgICAgICAgICAgIGlmIChXaWRnZXQucHJvcGVydGllcy5yb3VuZENvcm5lcnMpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1ib3JkZXItcicsIGAke1dpZGdldC5wcm9wZXJ0aWVzLnJvdW5kQ29ybmVyc31weGApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHlpZWxkIHNldFNldHRpbmdzKCk7CiAgICAgICAgICAgIGNyZWF0ZVZpZGVvKCk7CiAgICAgICAgfSk7CiAgICB9KSgpOwp9CmNhdGNoIChlKSB7CiAgICBjb25zb2xlLmxvZygnaW5pdGlhbGl6YXRpb24gZXJyb3IgaW4gY2F0Y2g6ICcsIGUpOwp9CmZ1bmN0aW9uIGNyZWF0ZVZpZGVvKCkgewogICAgaWYgKCF2aWRlbykgewogICAgICAgIHZpZGVvID0gbmV3IEJGVmlkZW8odmlkZW9FbGVtLCB2aWRlb1NldHRpbmdzLCBWaWRlb1RyYWNraW5nKTsKICAgIH0KfQpmdW5jdGlvbiBzZXRTZXR0aW5ncygpIHsKICAgIHZhciBfYTsKICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7CiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBXaWRnZXQucHJvcGVydGllczsKICAgICAgICBmb3IgKGxldCBhdHRybmFtZSBpbiBzZXR0aW5ncykgewogICAgICAgICAgICB2aWRlb1NldHRpbmdzW2F0dHJuYW1lXSA9IHNldHRpbmdzW2F0dHJuYW1lXTsKICAgICAgICB9CiAgICAgICAgbGV0IGZlZWRGaWVsZE5hbWUgPSBXaWRnZXQucHJvcGVydGllcy5mZWVkRmllbGQ7CiAgICAgICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQgJiYgZmVlZEZpZWxkTmFtZSAmJiBXaWRnZXQucHJvcGVydGllcy5keW5hbWljQ29udGVudC5pZCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZmVlZCA9IHlpZWxkIFdpZGdldC5wcm9wZXJ0aWVzLmR5bmFtaWNDb250ZW50LmxvYWQoKTsKICAgICAgICAgICAgICAgIGlmIChmZWVkICYmIGZlZWQuZGF0YSAmJiBmZWVkLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgZmVlZCA9IGZlZWQuZGF0YTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnZGVzaWduLXZpZXcnKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NvbWUgZXJyb3Igd2l0aCBmZWVkOiAnLCBlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZmVlZCAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF0gJiYgZmVlZFtmZWVkSXRlcmF0aW9uSW5kZXhdW2ZlZWRGaWVsZE5hbWVdKSB7CiAgICAgICAgICAgICAgICBmZWVkVXJsID0gKF9hID0gZmVlZFtmZWVkSXRlcmF0aW9uSW5kZXhdW2ZlZWRGaWVsZE5hbWVdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudmFsdWU7CiAgICAgICAgICAgICAgICAvLyBzZXQgdXJsIGZyb20gZmVlZAogICAgICAgICAgICAgICAgdmlkZW9TZXR0aW5ncy51cmwgPSBnZXRBZGp1c3RlZFVybChmZWVkVXJsKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgLy8gc2V0IHVybCBmcm9tIHdpZGdldCBwcm9wZXJ0aWVzCiAgICAgICAgICAgIHZpZGVvU2V0dGluZ3MudXJsID0gZ2V0QWRqdXN0ZWRVcmwoV2lkZ2V0LnByb3BlcnRpZXMudXJsKTsKICAgICAgICB9CiAgICAgICAgbGV0IHBvc3RlcjsKICAgICAgICBsZXQgZmFsbGJhY2tJbWFnZTsKICAgICAgICBpZiAodmlkZW9TZXR0aW5ncy5wb3N0ZXIpIHsKICAgICAgICAgICAgcG9zdGVyID0gZ2V0T3B0aW1hbEltYWdlKHZpZGVvU2V0dGluZ3MucG9zdGVyKTsKICAgICAgICB9CiAgICAgICAgaWYgKHZpZGVvU2V0dGluZ3MuZmFsbGJhY2tJbWFnZSkgewogICAgICAgICAgICBmYWxsYmFja0ltYWdlID0gZ2V0T3B0aW1hbEltYWdlKHZpZGVvU2V0dGluZ3MuZmFsbGJhY2tJbWFnZSk7CiAgICAgICAgfQogICAgICAgIHZpZGVvU2V0dGluZ3MucG9zdGVyID0gcG9zdGVyOwogICAgICAgIHZpZGVvU2V0dGluZ3MuZmFsbGJhY2tJbWFnZSA9IGZhbGxiYWNrSW1hZ2U7CiAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7CiAgICAgICAgICAgIHZpZGVvU2V0dGluZ3MuY29udHJvbHMgPSBmYWxzZTsKICAgICAgICAgICAgdmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgPSBNYXRoLm1heCgwLCB2aWRlb1NldHRpbmdzLnN0YXJ0VGltZSk7CiAgICAgICAgICAgIHZpZGVvU2V0dGluZ3MuYXV0b3BsYXkgPSBmYWxzZTsKICAgICAgICAgICAgdmlkZW9TZXR0aW5ncy5wb3N0ZXIgPSBudWxsOwogICAgICAgIH0KICAgIH0pOwp9CmZ1bmN0aW9uIGdldE9wdGltYWxJbWFnZShzcmMpIHsKICAgIHJldHVybiBXaWRnZXQuZ2V0T3B0aW1pemVkSW1hZ2VVcmwoc3JjLCB7IHdpZHRoOiBXaWRnZXQud2lkdGgsIGhlaWdodDogV2lkZ2V0LmhlaWdodCwgZml0T3B0aW9uOiBXaWRnZXQucHJvcGVydGllcy5iYWNrZ3JvdW5kRmlsbC50b0xvd2VyQ2FzZSgpIH0pOwp9CmZ1bmN0aW9uIHN0cmlwKHMpIHsKICAgIGNvbnN0IHRtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIkRJViIpOwogICAgdG1wLmlubmVySFRNTCA9IHM7CiAgICByZXR1cm4gdG1wLnRleHRDb250ZW50IHx8IHRtcC5pbm5lclRleHQgfHwgIiI7Cn0KZnVuY3Rpb24gQkZWaWRlbyhlbGVtLCBvcHRpb25zLCBWaWRlb1RyYWNraW5nKSB7CiAgICBsZXQgX3NldHRpbmdzID0gZGVzZXJpYWxpemVTZXR0aW5ncyhvcHRpb25zKTsKICAgIGxldCBfdmlkZW87CiAgICBjb25zdCBlbEJ5SWQgPSBzZWwgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsKTsKICAgIGxldCBldmVudFF1ZXVlID0gW107CiAgICBsZXQgZGV2aWNlSW5mbyA9IGdldERldmljZUluZm8oKTsKICAgIGxldCBwbGF5UHJvbWlzZTsKICAgIGxldCB2aWRlb1RyYWNraW5nOwogICAgbGV0IGRlZmF1bHRWaWRlb1R5cGVzID0gWwogICAgICAgIHsKICAgICAgICAgICAgZXh0ZW5zaW9uOiAnbXA0JywKICAgICAgICAgICAgdHlwZTogJ3ZpZGVvL21wNCcKICAgICAgICB9CiAgICBdOwogICAgbGV0IHRvdGFsUGxheXRpbWU7CiAgICBsZXQgdm9sdW1lID0gMDsKICAgIGxldCBoYXNQbGF5ZWQgPSBmYWxzZTsKICAgIGxldCByZWFkeVN0YXRlID0gMDsKICAgIGNvbnN0IHBsYXllciA9IGVsQnlJZCgndmlkZW8tcGxheWVyJyk7CiAgICBjb25zdCB2aWRlb0NvbnRhaW5lciA9IGVsQnlJZCgnY29udGFpbmVyJyk7CiAgICBjb25zdCBwbGF5UGF1c2VPdmVybGF5ID0gZWxCeUlkKCdwbGF5LXBhdXNlLW92ZXJsYXknKTsKICAgIGNvbnN0IHBvc3RlciA9IGVsQnlJZCgncG9zdGVyJyk7CiAgICAvLyBJbml0aWFsaXplIFZpZGVvIGNvbnRyb2xzCiAgICBsZXQgdmlkZW9Db250cm9scyA9IGVsQnlJZCgndmlkZW8tY29udHJvbHMnKTsKICAgIGxldCBwbGF5YmFjayA9IGVsQnlJZCgncGxheWJhY2snKTsKICAgIGxldCB2b2x1bWVDb250YWluZXIgPSBlbEJ5SWQoJ3ZvbHVtZScpOwogICAgbGV0IHZvbHVtZUNvbnRyb2wgPSBlbEJ5SWQoJ3ZvbHVtZS1jb250cm9sbGVyJyk7CiAgICBsZXQgdm9sdW1lQ29udHJvbFZhbHVlID0gZWxCeUlkKCd2b2x1bWUtdmFsdWUnKTsKICAgIGxldCB2b2x1bWVDb250cm9sVG9nZ2xlID0gZWxCeUlkKCd2b2x1bWUtaWNvbicpOwogICAgbGV0IHByb2dyZXNzID0gZWxCeUlkKCdwcm9ncmVzcycpOwogICAgbGV0IHZpZGVvRHVyYXRpb24gPSBlbEJ5SWQoJ3Byb2dyZXNzLXRpbWVyJyk7CiAgICBsZXQgZnVsbHNjcmVlbiA9IGVsQnlJZCgnZnVsbHNjcmVlbicpOwogICAgbGV0IHRpbWVCYXIgPSBlbEJ5SWQoJ3RpbWVCYXInKTsKICAgIHBsYXliYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Ub2dnbGVQbGF5UGF1c2UpOwogICAgdm9sdW1lQ29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvblZvbHVtZURyYWcpOwogICAgdm9sdW1lQ29udHJvbFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVm9sdW1lVG9nZ2xlKTsKICAgIHByb2dyZXNzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uVGltZVNlZWtEcmFnKTsKICAgIGZ1bGxzY3JlZW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVGdWxsc2NyZWVuKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbkNvbnRyb2xzTW91c2VVcCk7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbkNvbnRyb2xzTW91c2VEb3duKTsKICAgIGNvbnN0IHZvbHVtZVRvZ2dsZUJ1dHRvbiA9IGVsQnlJZCgndm9sdW1lVG9nZ2xlJyk7CiAgICB2b2x1bWVUb2dnbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblZvbHVtZVRvZ2dsZSk7CiAgICB0cnkgewogICAgICAgIGlmIChwbGF5ZXIpIHsKICAgICAgICAgICAgcGxheWVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocGxheWVyKTsKICAgICAgICAgICAgX3ZpZGVvID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgaWYgKCFfc2V0dGluZ3MudXJsKSB7CiAgICAgICAgICAgIF9zZXR0aW5ncy51cmwgPSAnJzsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1cmwuJyk7CiAgICAgICAgfQogICAgICAgIC8vIFNldCBwb3N0ZXIgYmVmb3JlIGxvYWRpbmcgdmlkZW8KICAgICAgICBpZiAoX3NldHRpbmdzLnBvc3RlcikgewogICAgICAgICAgICBwb3N0ZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgX3NldHRpbmdzLnBvc3RlciArICcpJzsKICAgICAgICB9CiAgICAgICAgaWYgKF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlICYmIENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7CiAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSArICcpJzsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UgJiYgZGV2aWNlSW5mby5pc01vYmlsZSAmJiAhZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lKSB7CiAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSArICcpJzsKICAgICAgICB9CiAgICAgICAgX3ZpZGVvID0gY3JlYXRlVmlkZW9FbGVtZW50KF9zZXR0aW5ncy51cmwpOwogICAgICAgIGVsZW0uYXBwZW5kQ2hpbGQoX3ZpZGVvKTsKICAgICAgICAvLyBJbW1lZGlhdGVseSBzZXQgZmlsbCBvcHRpb24gdG8gYXZvaWQgcmVzaXppbmcgdG8gYmUgc2VlbgogICAgICAgIHNldEZpbGxPcHRpb24oKTsKICAgICAgICBpZiAoQWQucGFyYW1ldGVycy5pc09tbmlSZW5kZXIpIHsKICAgICAgICAgICAgX3ZpZGVvLnBhdXNlKCk7CiAgICAgICAgICAgIF9zZXR0aW5ncy5hdXRvcGxheSA9IGZhbHNlOwogICAgICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5QbGF5LCB0aW1lID0+IHsKICAgICAgICAgICAgICAgIGlmICh0aW1lID49IFdpZGdldC50aW1lICYmIHRpbWUgPCBXaWRnZXQuZHVyYXRpb24pIHsKICAgICAgICAgICAgICAgICAgICBwbGF5VmlkZW8oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIF92aWRlby5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsIG9uTWV0YUxvYWRlZCk7CiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgb25WaWRlb0VuZGVkKTsKICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheScsIG9uVmlkZW9QbGF5KTsKICAgICAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCBvblZpZGVvUGF1c2UpOwogICAgICAgIF92aWRlby5hZGRFdmVudExpc3RlbmVyKCd2b2x1bWVjaGFuZ2UnLCBvblZvbHVtZUNoYW5nZSk7CiAgICAgICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXl0aHJvdWdoJywgb25DYW5QbGF5VGhyb3VnaCk7CiAgICAgICAgLyoKICAgICAgICAqIFdlIHVzZSBSQUYgaW5zdGVhZCBvZiBuYXRpdmUgdGltZXVwZGF0ZSBldmVudCBvbiB0aGUgbWVkaWEgQVBJIHRvCiAgICAgICAgKiBnZXQgYSBtb3JlIGFjY3VyYXRlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjdXJyZW50IHRpbWUgb2YgdGhlIHZpZGVvCiAgICAgICAgKi8KICAgICAgICBmdW5jdGlvbiB0aW1lVXBkYXRlKCkgewogICAgICAgICAgICBvblRpbWVVcGRhdGVkKCk7CiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGltZVVwZGF0ZSk7CiAgICAgICAgfQogICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrKTsKICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGljayk7CiAgICB9CiAgICBjYXRjaCAoZSkgewogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LmFkZCgnc2hvdycpOwogICAgICAgIHRocm93IG5ldyBFcnJvcihlLnN0YWNrKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB2aWRlbydzIHNldHRpbmdzCiAgICAgKiBPbmx5IHNldHRpbmdzIHRoYXQgYXJlIHBhc3NlZCBhcmUgY2hhbmdlZCwgcmVzdCByZW1haW4gcGVyc2lzdGVudAogICAgICogQHBhcmFtICB7fSBzZXR0aW5ncwogICAgICovCiAgICBmdW5jdGlvbiBzZXRWaWRlb1NldHRpbmdzKHNldHRpbmdzKSB7CiAgICAgICAgLy8gTWVyZ2UgY3VycmVudCBzZXR0aW5ncyB3aXRoIHBvdGVudGlhbCBuZXcgc2V0dGluZ3MKICAgICAgICBmb3IgKGxldCBhdHRybmFtZSBpbiBzZXR0aW5ncykgewogICAgICAgICAgICBfc2V0dGluZ3NbYXR0cm5hbWVdID0gc2V0dGluZ3NbYXR0cm5hbWVdOwogICAgICAgIH0KICAgICAgICBfc2V0dGluZ3MgPSBkZXNlcmlhbGl6ZVNldHRpbmdzKF9zZXR0aW5ncyk7CiAgICAgICAgdmlkZW9UcmFja2luZyA9IG5ldyBWaWRlb1RyYWNraW5nKGdldFVybE1ldGEoX3NldHRpbmdzLnVybCkpOwogICAgICAgIHRvdGFsUGxheXRpbWUgPSAoX3NldHRpbmdzLnN0YXJ0VGltZSA+PSAxICYmIF9zZXR0aW5ncy5lbmRUaW1lID49IDEpCiAgICAgICAgICAgID8gX3NldHRpbmdzLmVuZFRpbWUgLSBfc2V0dGluZ3Muc3RhcnRUaW1lCiAgICAgICAgICAgIDogX3ZpZGVvLmR1cmF0aW9uIC0gX3NldHRpbmdzLnN0YXJ0VGltZTsKICAgICAgICBpZiAoX3NldHRpbmdzLmxvb3BXaXRoQmFubmVyKSB7CiAgICAgICAgICAgIGlmIChXaWRnZXQuZHVyYXRpb24gPiBfdmlkZW8uZHVyYXRpb24pIHsKICAgICAgICAgICAgICAgIHRvdGFsUGxheXRpbWUgPSBfdmlkZW8uZHVyYXRpb247CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0b3RhbFBsYXl0aW1lID0gV2lkZ2V0LmR1cmF0aW9uOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIE9ubHkgc2V0IGF1dG9wbGF5IHRvIHRydWUgaWYgdGhlIGRldmljZSBzdXBwb3J0cyBwbGF5c0lubGluZSBhdHRyaWJ1dGUgYW5kIGlzIG1vYmlsZSwKICAgICAgICAgKiBhdXRvcGxheWluZyBpcyBvdGhlcndpc2UgaGFuZGxlZCBmcm9tIGNhblBsYXlUaHJvdWdoIHRvIGVuc3VyZSB0aGF0IHRoZSB2aWRlbyBpcyByZWFkeSBmb3IgcGxheWJhY2suCiAgICAgICAgICogVGhpcyBpcyB0byBwcm9wZXJseSBzaG93L2hpZGUgdGhlIHBvc3RlciB3aGlsc3QgdmlkZW8gaXMgYnVmZmVyaW5nCiAgICAgICAgICovCiAgICAgICAgX3ZpZGVvLmF1dG9wbGF5ID0gZGV2aWNlSW5mby5jYW5QbGF5SW5saW5lICYmIGRldmljZUluZm8uaXNNb2JpbGUKICAgICAgICAgICAgPyBfc2V0dGluZ3MuYXV0b3BsYXkKICAgICAgICAgICAgOiBmYWxzZTsKICAgICAgICBfdmlkZW8uY29udHJvbHMgPSBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUgJiYgZGV2aWNlSW5mby5pc01vYmlsZQogICAgICAgICAgICA/IF9zZXR0aW5ncy5jb250cm9scwogICAgICAgICAgICA6IGZhbHNlOwogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCAhPT0gJ2ltYWdlJyAmJiAhQWQucGFyYW1ldGVycy5zZWVrKSB7CiAgICAgICAgICAgIF92aWRlby5jdXJyZW50VGltZSA9IF9zZXR0aW5ncy5zdGFydFRpbWU7CiAgICAgICAgfQogICAgICAgIC8vIFByZXYgZnVudGlvbmFsaXR5IGlmIFN0dWRpbwogICAgICAgIC8vIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PSAnaW1hZ2UnICYmIEFkLnBhcmFtZXRlcnMuc2VlaykgewogICAgICAgIC8vICAgICBfdmlkZW8uY3VycmVudFRpbWUgPSB0b1JlbGF0aXZlVGltZShBZC5wYXJhbWV0ZXJzLnNlZWspOwogICAgICAgIC8vIH0KICAgICAgICAvLyBlbHNlIHsKICAgICAgICAvLyAgICAgX3ZpZGVvLmN1cnJlbnRUaW1lID0gX3NldHRpbmdzLnN0YXJ0VGltZTsKICAgICAgICAvLyB9CiAgICAgICAgc2V0Vm9sdW1lKF9zZXR0aW5ncy52b2x1bWUpOwogICAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gYXV0b3BsYXkgYW5kIHRoZXJlJ3Mgdm9sdW1lIHRoZXJlJ3Mgbm8gcG9pbnQgaW4gbXV0aW5nIHRoZSB2aWRlbyBieSBkZWZhdWx0CiAgICAgICAgaWYgKCghX3NldHRpbmdzLmF1dG9wbGF5ICYmIF9zZXR0aW5ncy52b2x1bWUpIHx8IChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JyAmJiBfc2V0dGluZ3Mudm9sdW1lKSkgewogICAgICAgICAgICBfdmlkZW8ubXV0ZWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgX3ZpZGVvLnBsYXliYWNrUmF0ZSA9IF9zZXR0aW5ncy5wbGF5YmFja1JhdGU7CiAgICAgICAgLy8gVXBkYXRlIHBvc3RlciBpZiBjaGFuZ2VkCiAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ICE9PSAnaW1hZ2UnICYmIF9zZXR0aW5ncy5wb3N0ZXIpIHsKICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIF9zZXR0aW5ncy5wb3N0ZXIgKyAnKSc7CiAgICAgICAgfQogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JykgewogICAgICAgICAgICB2aWRlby5wYXVzZSgpOwogICAgICAgIH0KICAgICAgICB1cGRhdGVET00oKTsKICAgIH0KICAgIGZ1bmN0aW9uIGdldFByb3BlclVybCh1cmwpIHsKICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgvKFxyXG58XG58XHJ8XHMpL2dtLCAiIik7CiAgICAgICAgbGV0IHVybHMgPSB1cmwuc3BsaXQoJywnKTsKICAgICAgICBpZiAoKHVybHMubGVuZ3RoID09PSAyICYmICF1cmwubWF0Y2goL1wuKHdlYm18bW92KS8pKSB8fCB1cmxzLmxlbmd0aCA+IDIpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmICh1cmxzLmxlbmd0aCA9PT0gMSAmJiAhdXJsLm1hdGNoKCcubXA0JykpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAodXJscy5sZW5ndGggPT09IDIpIHsKICAgICAgICAgICAgaWYgKGdldERldmljZUluZm8oKS5pc1NhZmFyaSkgewogICAgICAgICAgICAgICAgdXJsID0gdXJsc1swXS5tYXRjaCgnLm1vdicpID8gdXJsc1swXSA6IHVybHNbMV07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB1cmwgPSB1cmxzWzBdLm1hdGNoKCcud2VibScpID8gdXJsc1swXSA6IHVybHNbMV07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaW5zdHJ1Y3Rpb25zLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgICAgICByZXR1cm4gdXJsOwogICAgfQogICAgZnVuY3Rpb24gY3JlYXRlVmlkZW9FbGVtZW50KHVybCkgewogICAgICAgIHVybCA9IGdldFByb3BlclVybCh1cmwpOwogICAgICAgIGlmICghdXJsKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIHUgPSBnZXRVcmxNZXRhKHVybCk7CiAgICAgICAgY29uc3QgdmlkZW9UeXBlID0gZ2V0VmlkZW9UeXBlQW5kVXBkYXRlU291cmNlVXJsKHUpOyAvLyBbe3R5cGUsIGV4dGVuc2lvbn1dCiAgICAgICAgbGV0IHVybFNyYyA9IHUuc291cmNlVXJsOwogICAgICAgIGxldCBxdWVyeVBhcmFtcyA9IHUucGFyYW1zOwogICAgICAgIGNvbnN0IHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTsKICAgICAgICB2aWRlby5pZCA9ICd2aWRlby1wbGF5ZXInOwogICAgICAgIHZpZGVvLnByZWxvYWQgPSAnYXV0byc7CiAgICAgICAgdmlkZW8uc2V0QXR0cmlidXRlKCdwbGF5c2lubGluZScsICcnKTsKICAgICAgICAvLyBNdXRlZCBpcyBzZXQgaGVyZSBpbnN0ZWFkIG9mIHNldFZpZGVvU2V0dGluZyB0byBwcmV2ZW50IGl0IHRvIGJlIG11dGVkIHdoZW4gbm90IHdhbnRlZAogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JykgewogICAgICAgICAgICB2aWRlby5tdXRlZCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdmlkZW8ubXV0ZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdpbWFnZScpIHsKICAgICAgICAgICAgdmlkZW8uY3VycmVudFRpbWUgPSB0b1JlbGF0aXZlVGltZShUaW1lbGluZS5jdXJyZW50VGltZSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKEFkLnBhcmFtZXRlcnMuc2VlaykgewogICAgICAgICAgICB2aWRlby5jdXJyZW50VGltZSA9IHRvUmVsYXRpdmVUaW1lKEFkLnBhcmFtZXRlcnMuc2Vlayk7CiAgICAgICAgfQogICAgICAgIC8vIFByZXYgU3R1ZGlvIGZ1bnRpb25hbGl0eQogICAgICAgIC8vIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2ltYWdlJyAmJiBBZC5wYXJhbWV0ZXJzLnNlZWspIHsKICAgICAgICAvLyAgICAgdmlkZW8uY3VycmVudFRpbWUgPSB0b1JlbGF0aXZlVGltZShBZC5wYXJhbWV0ZXJzLnNlZWspOwogICAgICAgIC8vIH0KICAgICAgICBpZiAoZGV2aWNlSW5mby5pc01vYmlsZSkgewogICAgICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ211dGVkJywgJycpOwogICAgICAgIH0KICAgICAgICBmb3IgKGxldCBpIGluIHZpZGVvVHlwZSkgewogICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTsKICAgICAgICAgICAgc291cmNlLnNyYyA9IHVybFNyYyArICcuJyArIHZpZGVvVHlwZVtpXS5leHRlbnNpb24gKyBxdWVyeVBhcmFtczsKICAgICAgICAgICAgc291cmNlLnNldEF0dHJpYnV0ZSgidHlwZSIsIHZpZGVvVHlwZVtpXS50eXBlKTsKICAgICAgICAgICAgdmlkZW8uYXBwZW5kQ2hpbGQoc291cmNlKTsKICAgICAgICB9CiAgICAgICAgdmlkZW8ubG9hZCgpOwogICAgICAgIHJldHVybiB2aWRlbzsKICAgIH0KICAgIGZ1bmN0aW9uIGdldFZpZGVvVHlwZUFuZFVwZGF0ZVNvdXJjZVVybCh1KSB7CiAgICAgICAgbGV0IHZpZGVvVHlwZTsKICAgICAgICBpZiAodS5leHQubWF0Y2goLyh3ZWJtfG1vdikvKSkgewogICAgICAgICAgICBpZiAoZ2V0RGV2aWNlSW5mbygpLmlzU2FmYXJpKSB7CiAgICAgICAgICAgICAgICB2aWRlb1R5cGUgPSBbewogICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb246ICdtb3YnLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW8vcXVpY2t0aW1lJwogICAgICAgICAgICAgICAgICAgIH1dOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdmlkZW9UeXBlID0gW3sKICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uOiAnd2VibScsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlby93ZWJtJwogICAgICAgICAgICAgICAgICAgIH1dOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB2aWRlb1R5cGU7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZpZGVvVHlwZXM7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gdXBkYXRlRE9NKCkgewogICAgICAgIGlmICghX3NldHRpbmdzLmF1dG9wbGF5ICYmIF9zZXR0aW5ncy5wb3N0ZXIpIHsKICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICAgICAgX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICB9CiAgICAgICAgaWYgKCFkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUgJiYgZGV2aWNlSW5mby5pc01vYmlsZSkgewogICAgICAgICAgICBpZiAoX3NldHRpbmdzLmZhbGxiYWNrSW1hZ2UpIHsKICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSArICcpJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIF92aWRlby5zdGFydFRpbWUgPSAxOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChkZXZpY2VJbmZvLmlzTW9iaWxlKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnbW9iaWxlJyk7CiAgICAgICAgfQogICAgICAgIGlmICghX3NldHRpbmdzLmNvbnRyb2xzICYmICFfc2V0dGluZ3MuYXV0b3BsYXkgJiYgQ3JlYXRpdmUuZW52aXJvbm1lbnQgIT09ICdpbWFnZScpIHsKICAgICAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgICAgICB9CiAgICAgICAgaWYgKF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlICYmICFkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUpIHsKICAgICAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7CiAgICAgICAgfQogICAgICAgIHBsYXlQYXVzZU92ZXJsYXkucXVlcnlTZWxlY3RvckFsbCgnc3ZnJylbMF0uc3R5bGUud2lkdGggPSBfc2V0dGluZ3MucGxheVBhdXNlQnV0dG9uU2l6ZSArICclJzsKICAgICAgICBwbGF5UGF1c2VPdmVybGF5LnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2ZycpWzFdLnN0eWxlLndpZHRoID0gX3NldHRpbmdzLnBsYXlQYXVzZUJ1dHRvblNpemUgKyAnJSc7CiAgICAgICAgaWYgKF9zZXR0aW5ncy5jb250cm9scyAmJiAhZGV2aWNlSW5mby5pc01vYmlsZSkgewogICAgICAgICAgICB2aWRlb0NvbnRyb2xzLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZpZGVvQ29udHJvbHMuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOwogICAgICAgIH0KICAgICAgICBfdmlkZW8uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gX3NldHRpbmdzLnBsYXllckJhY2tncm91bmQ7CiAgICAgICAgX3ZpZGVvLnN0eWxlLmZpbHRlciA9ICdncmF5c2NhbGUoJyArIF9zZXR0aW5ncy5ncmF5U2NhbGUgKyAnJSknOwogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gX3NldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvbiA/ICdibG9jaycgOiAnbm9uZSc7CiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLnRvcCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvblRvcCArICclJzsKICAgICAgICB2b2x1bWVUb2dnbGVCdXR0b24uc3R5bGUubGVmdCA9IF9zZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Qb3NpdGlvbkxlZnQgKyAnJSc7CiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnN0eWxlLndpZHRoID0gX3NldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblNpemUgKyAncHgnOwogICAgICAgIHZvbHVtZVRvZ2dsZUJ1dHRvbi5zdHlsZS5oZWlnaHQgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uU2l6ZSArICdweCc7CiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2ZycpWzBdLnN0eWxlLmZpbGwgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uQ29sb3I7CiAgICAgICAgdm9sdW1lVG9nZ2xlQnV0dG9uLnF1ZXJ5U2VsZWN0b3JBbGwoJ3N2ZycpWzFdLnN0eWxlLmZpbGwgPSBfc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uQ29sb3I7CiAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgiaW1hZ2VHZW5lcmF0b3JNb2RlIik7CiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSkgewogICAgICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIF9zZXR0aW5ncy5mYWxsYmFja0ltYWdlICsgJyknOwogICAgICAgICAgICAgICAgX3ZpZGVvLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsMCwwLDApJzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZXRGaWxsT3B0aW9uKCk7CiAgICB9CiAgICBmdW5jdGlvbiBzZXRGaWxsT3B0aW9uKCkgewogICAgICAgIGlmIChfc2V0dGluZ3MuYmFja2dyb3VuZEZpbGwgPT09ICdDb3ZlcicpIHsKICAgICAgICAgICAgcG9zdGVyLmNsYXNzTmFtZSA9ICdjb3Zlcic7CiAgICAgICAgICAgIChfdmlkZW8udmlkZW9IZWlnaHQgLyBfdmlkZW8udmlkZW9XaWR0aCkgPD0gKHZpZGVvQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCAvIHZpZGVvQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKQogICAgICAgICAgICAgICAgPyBfdmlkZW8uY2xhc3NOYW1lID0gJ2NvdmVyIGNvdmVyLXgnCiAgICAgICAgICAgICAgICA6IF92aWRlby5jbGFzc05hbWUgPSAnY292ZXIgY292ZXIteSc7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBwb3N0ZXIuY2xhc3NOYW1lID0gJyc7CiAgICAgICAgICAgIF92aWRlby5jbGFzc05hbWUgPSAnJzsKICAgICAgICB9CiAgICAgICAgaWYgKF9zZXR0aW5ncy5wb3N0ZXIpIHsKICAgICAgICAgICAgX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gcmVzdGFydFZpZGVvKCkgewogICAgICAgIF92aWRlby5jdXJyZW50VGltZSA9IF9zZXR0aW5ncy5zdGFydFRpbWU7CiAgICAgICAgcGxheVZpZGVvKCk7CiAgICB9CiAgICBmdW5jdGlvbiBzZXRSZWFkeVN0YXRlKCkgewogICAgICAgIGlmIChfdmlkZW8ucmVhZHlTdGF0ZSA+IHJlYWR5U3RhdGUpIHsKICAgICAgICAgICAgcmVhZHlTdGF0ZSA9IF92aWRlby5yZWFkeVN0YXRlOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHBsYXlWaWRlbyhmb3JjZVBsYXkpIHsKICAgICAgICAvKgogICAgICAgICAqIENoZWNrIGlmIHRoZSB2aWRlbyBpcyBwbGF5YWJsZSwgb3RoZXJ3aXNlIGFkZCBpdCB0byB0aGUgZXZlbnRRdWV1ZSB3aGljaAogICAgICAgICAqIHRyaWdnZXJzIHBsYXkgb24gY2FuUGxheVRocm91Z2ggd2hpY2ggaXMgd2hlbiB2aWRlbyBpcyBwbGF5YWJsZQogICAgICAgICAqLwogICAgICAgIHNldFJlYWR5U3RhdGUoKTsKICAgICAgICBpZiAoIVRpbWVsaW5lLmlzUGxheWluZyAmJiAhZm9yY2VQbGF5KSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcGxheUVycm9yID0gZmFsc2U7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICgoX3NldHRpbmdzLmF1dG9wbGF5IHx8IGhhc1BsYXllZCkgJiYgIXBsYXlFcnJvcikgewogICAgICAgICAgICAgICAgcG9zdGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIH0KICAgICAgICB9LCAxNTApOwogICAgICAgIGNvbnN0IHNob3VsZFBsYXkgPSAocmVhZHlTdGF0ZSA+PSAzICYmIF9zZXR0aW5ncy5hdXRvcGxheSkgfHwgaGFzUGxheWVkIHx8IGZvcmNlUGxheTsKICAgICAgICBpZiAoc2hvdWxkUGxheSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKHBsYXlQcm9taXNlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICBwbGF5UHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZGVvLnBsYXkoKS5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheUVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlQcm9taXNlID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCBvbkNhblBsYXlUaHJvdWdoKTsKICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBwbGF5UHJvbWlzZSA9IF92aWRlby5wYXVzZSgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGxheVByb21pc2UgPSBfdmlkZW8ucGxheSgpLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlFcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCBvbkNhblBsYXlUaHJvdWdoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuc3RhcnRlZCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIHByb21pc2VzIGFyZSBub3Qgc3VwcG9ydGVkCiAgICAgICAgICAgICAgICBfdmlkZW8ucGxheSgpLmNhdGNoKCgpID0+IHsgfSk7CiAgICAgICAgICAgICAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCBvbkNhblBsYXlUaHJvdWdoKTsKICAgICAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcuc3RhcnRlZCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGhhc1BsYXllZCA9IHRydWU7CiAgICAgICAgICAgIGlmIChkZXZpY2VJbmZvLmlzTW9iaWxlICYmICFkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUpIHsKICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgIF92aWRlby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChfc2V0dGluZ3MuY29udHJvbHMgJiYgIV9zZXR0aW5ncy5hdXRvcGxheSkgewogICAgICAgICAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGV2ZW50UXVldWUucHVzaCgncGxheScpOwogICAgICAgICAgICBpZiAodmlkZW9UcmFja2luZykgewogICAgICAgICAgICAgICAgdmlkZW9UcmFja2luZy5zdGFydGVkKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBzZWVrVG8ocykgewogICAgICAgIHNldFJlYWR5U3RhdGUoKTsKICAgICAgICBfdmlkZW8uY3VycmVudFRpbWUgPSBzOwogICAgfQogICAgZnVuY3Rpb24gcGF1c2VWaWRlbygpIHsKICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgewogICAgICAgICAgICBzZXRSZWFkeVN0YXRlKCk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB5aWVsZCBwbGF5UHJvbWlzZTsKICAgICAgICAgICAgICAgIF92aWRlby5wYXVzZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiBzdG9wVmlkZW8oKSB7CiAgICAgICAgcGF1c2VWaWRlbygpOwogICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOwogICAgfQogICAgZnVuY3Rpb24gc2V0Vm9sdW1lKHZvbHVtZSkgewogICAgICAgIF92aWRlby52b2x1bWUgPSBkZXZpY2VJbmZvLmlzTW9iaWxlID8gMCA6IHRvRnJhY3Rpb25zKHZvbHVtZSk7CiAgICB9CiAgICBmdW5jdGlvbiB0b2dnbGVNdXRlKG11dGUpIHsKICAgICAgICBpZiAoIWRldmljZUluZm8uaXNNb2JpbGUpIHsKICAgICAgICAgICAgX3ZpZGVvLm11dGVkID0gKHR5cGVvZiBtdXRlID09PSAnYm9vbGVhbicpID8gbXV0ZSA6ICFfdmlkZW8ubXV0ZWQ7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gbG9hZFZpZGVvKHVybCkgewogICAgICAgIHVybCA9IGdldFByb3BlclVybCh1cmwpOwogICAgICAgIGlmICghdXJsKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdXJsID0gZ2V0QWRqdXN0ZWRVcmwodXJsKTsKICAgICAgICBjb25zdCB1ID0gZ2V0VXJsTWV0YSh1cmwpOwogICAgICAgIGNvbnN0IHZpZGVvVHlwZSA9IGdldFZpZGVvVHlwZUFuZFVwZGF0ZVNvdXJjZVVybCh1KTsKICAgICAgICBjb25zdCB1cmxTcmMgPSB1LnNvdXJjZVVybDsKICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHUucGFyYW1zOwogICAgICAgIC8vIFVwZGF0ZSBzb3VyY2VzCiAgICAgICAgZm9yIChsZXQgdnQgaW4gdmlkZW9UeXBlKSB7CiAgICAgICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzb3VyY2UnKVt2dF07CiAgICAgICAgICAgIHMuc3JjID0gdXJsU3JjICsgJy4nICsgdmlkZW9UeXBlW3Z0XS5leHRlbnNpb24gKyBxdWVyeVBhcmFtczsKICAgICAgICB9CiAgICAgICAgdmFyIGN1cnJlbnRWb2x1bWUgPSBfdmlkZW8udm9sdW1lOwogICAgICAgIF92aWRlby5sb2FkKCk7CiAgICAgICAgaWYgKF9zZXR0aW5ncy5hdXRvcGxheSkgewogICAgICAgICAgICBwbGF5VmlkZW8oKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHBhdXNlVmlkZW8oKTsKICAgICAgICB9CiAgICAgICAgc2V0VmlkZW9TZXR0aW5ncyh7IHVybDogdXJsIH0pOwogICAgICAgIHNldFZvbHVtZShjdXJyZW50Vm9sdW1lKTsKICAgIH0KICAgIGZ1bmN0aW9uIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpIHsKICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCkgewogICAgICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctcGF1c2UnKTsKICAgICAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdzaG93LXBsYXknKTsKICAgICAgICAgICAgcGxheWJhY2suY2xhc3NOYW1lID0gJ2lzUGF1c2VkJzsKICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGF1c2VkJzsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdy1wbGF5Jyk7CiAgICAgICAgICAgIHBsYXlQYXVzZU92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnc2hvdy1wYXVzZScpOwogICAgICAgICAgICBwbGF5YmFjay5jbGFzc05hbWUgPSAnaXNQbGF5aW5nJzsKICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7CiAgICAgICAgfQogICAgICAgIGlmIChfdmlkZW8ucGF1c2VkIHx8IF92aWRlby5lbmRlZCkgewogICAgICAgICAgICBwbGF5YmFjay5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOwogICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5jbGFzc05hbWUgPSAnaXNQYXVzZWQnOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcGxheWJhY2suY2xhc3NOYW1lID0gJ2lzUGxheWluZyc7CiAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdpc1BsYXlpbmcnOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGdldFVybE1ldGEodXJsKSB7CiAgICAgICAgY29uc3QgbyA9IHt9OwogICAgICAgIGlmICh1cmwgJiYgdXJsLmxlbmd0aCkgewogICAgICAgICAgICBvLnVybCA9IHVybC5zcGxpdCgnPycpWzBdOwogICAgICAgICAgICBvLnNvdXJjZVVybCA9IHVybC5zcGxpdCgnPycpWzBdLnN1YnN0cmluZygwLCB1cmwubGFzdEluZGV4T2YoIi4iKSk7CiAgICAgICAgICAgIG8ucGFyYW1zID0gdXJsLmluZGV4T2YoJz8nKSAhPSAtMSA/ICc/JyArIHVybC5zcGxpdCgnPycpWzFdIDogJyc7CiAgICAgICAgICAgIG8uZXh0ID0gdXJsLnNwbGl0KCc/JylbMF0uc3Vic3RyaW5nKHVybC5sYXN0SW5kZXhPZigiLiIpICsgMSkgfHwgJyc7CiAgICAgICAgICAgIG8uZmlsZW5hbWUgPSB1cmwubWF0Y2goLyhbXi9dKyQpLywgJycpWzBdLnNwbGl0KCc/JylbMF07CiAgICAgICAgfQogICAgICAgIHJldHVybiBvOwogICAgfQogICAgLyoKICAgICoqIEV2ZW50IGhhbmRsZXJzCiAgICAqLwogICAgZnVuY3Rpb24gb25NZXRhTG9hZGVkKCkgewogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOwogICAgICAgIHNldFJlYWR5U3RhdGUoKTsKICAgICAgICBfc2V0dGluZ3Muc3RhcnRUaW1lID0gX3NldHRpbmdzLnN0YXJ0VGltZSA8PSBfdmlkZW8uZHVyYXRpb24gPyBfc2V0dGluZ3Muc3RhcnRUaW1lIDogMDsKICAgICAgICBzZXRWaWRlb1NldHRpbmdzKF9zZXR0aW5ncyk7CiAgICAgICAgdGltZVVwZGF0ZSgpOwogICAgICAgIG9uVm9sdW1lQ2hhbmdlKCk7CiAgICB9CiAgICBmdW5jdGlvbiBvbkNhblBsYXlUaHJvdWdoKCkgewogICAgICAgIGVsQnlJZCgnaW5zdHJ1Y3Rpb25zJykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOwogICAgICAgIHNldFJlYWR5U3RhdGUoKTsKICAgICAgICBmb3IgKGxldCBldmVudCBvZiBldmVudFF1ZXVlKSB7CiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ3BsYXknOgogICAgICAgICAgICAgICAgICAgIHBsYXlWaWRlbygpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAncGF1c2UnOgogICAgICAgICAgICAgICAgICAgIHBhdXNlVmlkZW8oKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBoYXNQbGF5ZWQgPSB0cnVlOwogICAgICAgICAgICBpZiAoZXZlbnQgPT09ICdwbGF5JyAmJiBkZXZpY2VJbmZvLmNhblBsYXlJbmxpbmUpIHsKICAgICAgICAgICAgICAgIHBvc3Rlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgX3ZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGV2ZW50UXVldWUgPSBbXTsKICAgICAgICB0b2dnbGVQbGF5UGF1c2VCdXR0b24oKTsKICAgICAgICBpZiAocmVhZHlTdGF0ZSA+PSAzIHx8ICFfdmlkZW8ucGF1c2VkKSB7CiAgICAgICAgICAgIF92aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5Jywgb25DYW5QbGF5VGhyb3VnaCk7CiAgICAgICAgfQogICAgICAgIGlmIChXaWRnZXQucHJvcGVydGllcy5yb3VuZENvcm5lcnMpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLWJvcmRlci1yJywgYCR7V2lkZ2V0LnByb3BlcnRpZXMucm91bmRDb3JuZXJzfXB4YCk7CiAgICAgICAgfQogICAgICAgIHByb21pc2VSZXNvbHZlcigpOwogICAgfQogICAgZnVuY3Rpb24gb25UaW1lVXBkYXRlZCgpIHsKICAgICAgICBpZiAoIV92aWRlbykgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICghdGltZUJhci5zdHlsZS53aWR0aCkgewogICAgICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gX3ZpZGVvLmR1cmF0aW9uICsgJyUnOwogICAgICAgIH0KICAgICAgICB0aW1lQmFyLnN0eWxlLndpZHRoID0gTWF0aC5yb3VuZCgoX3ZpZGVvLmN1cnJlbnRUaW1lIC8gX3ZpZGVvLmR1cmF0aW9uKSAqIDEwMCkgKyAnJSc7CiAgICAgICAgaWYgKHZpZGVvRHVyYXRpb24uaW5uZXJIVE1MLnNwbGl0KCcvJylbMF0udHJpbSgpICE9PSBmb3JtYXRUaW1lKF92aWRlby5jdXJyZW50VGltZSkpIHsKICAgICAgICAgICAgdmlkZW9EdXJhdGlvbi5pbm5lckhUTUwgPSBmb3JtYXRUaW1lKF92aWRlby5jdXJyZW50VGltZSkgKyAnIC8gJyArIGZvcm1hdFRpbWUoX3ZpZGVvLmR1cmF0aW9uKTsKICAgICAgICB9CiAgICAgICAgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSB0b3RhbFBsYXl0aW1lICogMC45NSAtIDEgJiYgX3ZpZGVvLmN1cnJlbnRUaW1lIDw9IHRvdGFsUGxheXRpbWUgKiAwLjk1ICsgMSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgewogICAgICAgICAgICB2aWRlb1RyYWNraW5nLmNvbXBsZXRlZCgpOwogICAgICAgIH0KICAgICAgICAvLyBDaGVjayBpZiByZWFjaGVkIHRoaXJkIHF1YXJ0aWxlICg3NSUpCiAgICAgICAgZWxzZSBpZiAoX3ZpZGVvLmN1cnJlbnRUaW1lID49IHRvdGFsUGxheXRpbWUgKiAwLjc1IC0gMSAmJiBfdmlkZW8uY3VycmVudFRpbWUgPD0gdG90YWxQbGF5dGltZSAqIDAuNzUgKyAxICYmIFRpbWVsaW5lLmN1cnJlbnRUaW1lID49IFdpZGdldC50aW1lKSB7CiAgICAgICAgICAgIHZpZGVvVHJhY2tpbmcudHEoKTsKICAgICAgICB9CiAgICAgICAgLy8gQ2hlY2sgaWYgcmVhY2hlZCBtaWRwb2ludCAoNTAlKQogICAgICAgIGVsc2UgaWYgKF92aWRlby5jdXJyZW50VGltZSA+PSB0b3RhbFBsYXl0aW1lICogMC41MCAtIDEgJiYgX3ZpZGVvLmN1cnJlbnRUaW1lIDw9IHRvdGFsUGxheXRpbWUgKiAwLjUwICsgMSAmJiBUaW1lbGluZS5jdXJyZW50VGltZSA+PSBXaWRnZXQudGltZSkgewogICAgICAgICAgICB2aWRlb1RyYWNraW5nLm1wKCk7CiAgICAgICAgfQogICAgICAgIC8vIENoZWNrIGlmIHJlYWNoZWQgZmlyc3QgcXVhcnRpbGUgKDI1JSkKICAgICAgICBlbHNlIGlmIChfdmlkZW8uY3VycmVudFRpbWUgPj0gdG90YWxQbGF5dGltZSAqIDAuMjUgLSAxICYmIF92aWRlby5jdXJyZW50VGltZSA8PSB0b3RhbFBsYXl0aW1lICogMC4yNSArIDEgJiYgVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsKICAgICAgICAgICAgdmlkZW9UcmFja2luZy5mcSgpOwogICAgICAgIH0KICAgICAgICBpZiAoX3ZpZGVvLmN1cnJlbnRUaW1lID49ICgoX3NldHRpbmdzLmVuZFRpbWUgJiYgX3NldHRpbmdzLmVuZFRpbWUgPCBfdmlkZW8uZHVyYXRpb24pID8gX3NldHRpbmdzLmVuZFRpbWUgOiBfdmlkZW8uZHVyYXRpb24pICYmIFRpbWVsaW5lLmN1cnJlbnRUaW1lID49IFdpZGdldC50aW1lKSB7CiAgICAgICAgICAgIG9uVmlkZW9FbmRlZCgpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIG9uVmlkZW9FbmRlZCgpIHsKICAgICAgICBpZiAoIV9zZXR0aW5ncy5sb29wKSB7CiAgICAgICAgICAgIHBhdXNlVmlkZW8oKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJlc3RhcnRWaWRlbygpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIG9uVmlkZW9QbGF5KCkgewogICAgICAgIGNvbnNvbGUubG9nKCdvbnZpZGVvcGxheScpOwogICAgICAgIHZpZGVvVHJhY2tpbmcuc3RhcnRlZCgpOwogICAgICAgIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpOwogICAgfQogICAgZnVuY3Rpb24gb25WaWRlb1BhdXNlKCkgewogICAgICAgIHRvZ2dsZVBsYXlQYXVzZUJ1dHRvbigpOwogICAgfQogICAgZnVuY3Rpb24gb25Wb2x1bWVDaGFuZ2UoKSB7CiAgICAgICAgbGV0IGNsYXNzTmFtZSA9ICd1bm11dGVkJzsgLy8gZGVmYXVsdCB2YWx1ZQogICAgICAgIHZvbHVtZUNvbnRyb2xWYWx1ZS5zdHlsZS53aWR0aCA9ICFfdmlkZW8ubXV0ZWQgPyBfdmlkZW8udm9sdW1lICogMTAwICsgJyUnIDogJzAnOwogICAgICAgIC8vIGNoYW5nZSBjbGFzc05hbWUgdG8gbXV0ZWQKICAgICAgICBpZiAoX3ZpZGVvLnZvbHVtZSA9PT0gMCB8fCBfdmlkZW8ubXV0ZWQpIHsKICAgICAgICAgICAgY2xhc3NOYW1lID0gJ211dGVkJzsKICAgICAgICB9CiAgICAgICAgW3ZvbHVtZUNvbnRyb2xUb2dnbGUsIHZvbHVtZVRvZ2dsZUJ1dHRvbl0uZm9yRWFjaChlbCA9PiBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWUpOwogICAgfQogICAgZnVuY3Rpb24gb25DbGljayhldmVudCkgewogICAgICAgIGNvbnN0IGNsaWNrT25QbGF5UGF1c2VCdXR0b24gPSBldmVudC50YXJnZXQgIT09IGV2ZW50LmN1cnJlbnRUYXJnZXQ7CiAgICAgICAgaWYgKCFfc2V0dGluZ3MuY29udHJvbHMgJiYgIV9zZXR0aW5ncy5hdXRvcGxheSAmJiBjbGlja09uUGxheVBhdXNlQnV0dG9uKSB7CiAgICAgICAgICAgIGlmIChfdmlkZW8ucGF1c2VkKSB7CiAgICAgICAgICAgICAgICB0b2dnbGVNdXRlKGZhbHNlKTsKICAgICAgICAgICAgICAgIHBsYXlWaWRlbyh0cnVlKTsKICAgICAgICAgICAgICAgIHVzZXJJbml0aWF0ZWRQYXVzZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcGF1c2VWaWRlbygpOwogICAgICAgICAgICAgICAgdXNlckluaXRpYXRlZFBhdXNlID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgQ3JlYXRpdmUub3BlbihldmVudCwgdW5kZWZpbmVkKTsKICAgICAgICB9CiAgICB9CiAgICAvKgogICAgKiogVmlkZW8gY29udHJvbHMKICAgICovCiAgICBsZXQgdm9sdW1lRHJhZyA9IGZhbHNlOwogICAgbGV0IHRpbWVEcmFnID0gZmFsc2U7CiAgICBmdW5jdGlvbiBvblRvZ2dsZVBsYXlQYXVzZSgpIHsKICAgICAgICBpZiAoX3ZpZGVvLnBhdXNlZCB8fCBfdmlkZW8uZW5kZWQpIHsKICAgICAgICAgICAgcGxheVZpZGVvKCk7CiAgICAgICAgICAgIHVzZXJJbml0aWF0ZWRQYXVzZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcGF1c2VWaWRlbygpOwogICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSB0cnVlOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lRHJhZyhlKSB7CiAgICAgICAgaWYgKGUuYnV0dG9uICE9IDApCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB2b2x1bWVEcmFnID0gdHJ1ZTsKICAgICAgICB1cGRhdGVWb2x1bWUoZS5wYWdlWCk7CiAgICB9CiAgICA7CiAgICBmdW5jdGlvbiB1cGRhdGVWb2x1bWUoeCkgewogICAgICAgIGNvbnN0IG1heFZvbHVtZSA9IDE7CiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB4IC0gdm9sdW1lQ29udGFpbmVyLm9mZnNldExlZnQgLSB2b2x1bWVDb250cm9sLm9mZnNldExlZnQgLSAyOwogICAgICAgIC8vIGNsYW1wIHBlcmNlbnRhZ2UgdG8gYSB2YWx1ZSBmcm9tIDAgdG8gMTAwCiAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCAqIHBvc2l0aW9uIC8gdm9sdW1lQ29udHJvbC5vZmZzZXRXaWR0aCwgMTAwKSk7CiAgICAgICAgc2V0Vm9sdW1lKG1heFZvbHVtZSAqIHBlcmNlbnRhZ2UgLyAxMDApOwogICAgICAgIHZvbHVtZSA9IF92aWRlby52b2x1bWU7CiAgICAgICAgX3ZpZGVvLm11dGVkID0gZmFsc2U7CiAgICAgICAgb25Wb2x1bWVDaGFuZ2UoKTsKICAgIH0KICAgIGZ1bmN0aW9uIG9uVm9sdW1lVG9nZ2xlKCkgewogICAgICAgIF92aWRlby5tdXRlZCA9ICFfdmlkZW8ubXV0ZWQ7CiAgICAgICAgb25Wb2x1bWVDaGFuZ2UoKTsKICAgIH0KICAgIGZ1bmN0aW9uIG9uVGltZVNlZWtEcmFnKGUpIHsKICAgICAgICBpZiAoZS5idXR0b24gIT0gMCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIHRpbWVEcmFnID0gdHJ1ZTsKICAgICAgICB1cGRhdGVQcm9ncmVzc2JhcihlLnBhZ2VYKTsKICAgIH0KICAgIGZ1bmN0aW9uIG9uQ29udHJvbHNNb3VzZVVwKGUpIHsKICAgICAgICBpZiAodm9sdW1lRHJhZykgewogICAgICAgICAgICB2b2x1bWVEcmFnID0gZmFsc2U7CiAgICAgICAgICAgIHVwZGF0ZVZvbHVtZShlLnBhZ2VYKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRpbWVEcmFnKSB7CiAgICAgICAgICAgIHRpbWVEcmFnID0gZmFsc2U7CiAgICAgICAgICAgIHVwZGF0ZVByb2dyZXNzYmFyKGUucGFnZVgpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIG9uQ29udHJvbHNNb3VzZURvd24oZSkgewogICAgICAgIGlmICh2b2x1bWVEcmFnKSB7CiAgICAgICAgICAgIHVwZGF0ZVZvbHVtZShlLnBhZ2VYKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRpbWVEcmFnKSB7CiAgICAgICAgICAgIHVwZGF0ZVByb2dyZXNzYmFyKGUucGFnZVgpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHVwZGF0ZVByb2dyZXNzYmFyKHgpIHsKICAgICAgICBjb25zdCBtYXhkdXJhdGlvbiA9IF92aWRlby5kdXJhdGlvbjsKICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHggLSBwcm9ncmVzcy5vZmZzZXRMZWZ0OwogICAgICAgIC8vIGNsYW1wIHBlcmNlbnRhZ2UgdG8gYSB2YWx1ZSBmcm9tIDAgdG8gMTAwCiAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCAqIHBvc2l0aW9uIC8gcHJvZ3Jlc3Mub2Zmc2V0V2lkdGgsIDEwMCkpOwogICAgICAgIHRpbWVCYXIuc3R5bGUud2lkdGggPSBwZXJjZW50YWdlICsgJyUnOwogICAgICAgIF92aWRlby5jdXJyZW50VGltZSA9IG1heGR1cmF0aW9uICogcGVyY2VudGFnZSAvIDEwMDsKICAgIH0KICAgIGZ1bmN0aW9uIGFscmVhZHlQbGF5ZWQoKSB7CiAgICAgICAgcmV0dXJuIGhhc1BsYXllZDsKICAgIH0KICAgIGNvbnN0IGRvYyA9IGRvY3VtZW50OwogICAgLy8gRnVsbHNjcmVlbgogICAgY29uc3QgZnVsbFNjcmVlbkVuYWJsZWQgPSAhIShkb2MuZnVsbHNjcmVlbkVuYWJsZWQKICAgICAgICB8fCBkb2MubW96RnVsbFNjcmVlbkVuYWJsZWQKICAgICAgICB8fCBkb2MubXNGdWxsc2NyZWVuRW5hYmxlZAogICAgICAgIHx8IGRvYy53ZWJraXRTdXBwb3J0c0Z1bGxzY3JlZW4KICAgICAgICB8fCBkb2Mud2Via2l0RnVsbHNjcmVlbkVuYWJsZWQpOwogICAgaWYgKCFmdWxsU2NyZWVuRW5hYmxlZCkgewogICAgICAgIGZ1bGxzY3JlZW4uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIH0KICAgIGZ1bmN0aW9uIGhhbmRsZUZ1bGxzY3JlZW4oKSB7CiAgICAgICAgaWYgKGlzRnVsbFNjcmVlbigpKSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5leGl0RnVsbHNjcmVlbikgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChkb2MubW96Q2FuY2VsRnVsbFNjcmVlbikgewogICAgICAgICAgICAgICAgZG9jLm1vekNhbmNlbEZ1bGxTY3JlZW4oKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChkb2Mud2Via2l0Q2FuY2VsRnVsbFNjcmVlbikgewogICAgICAgICAgICAgICAgZG9jLndlYmtpdENhbmNlbEZ1bGxTY3JlZW4oKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChkb2MubXNFeGl0RnVsbHNjcmVlbikgewogICAgICAgICAgICAgICAgZG9jLm1zRXhpdEZ1bGxzY3JlZW4oKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YShmYWxzZSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBjb25zdCB2YyA9IHZpZGVvQ29udGFpbmVyOwogICAgICAgICAgICBpZiAodmMucmVxdWVzdEZ1bGxzY3JlZW4pIHsKICAgICAgICAgICAgICAgIHZjLnJlcXVlc3RGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodmMubW96UmVxdWVzdEZ1bGxTY3JlZW4pIHsKICAgICAgICAgICAgICAgIHZjLm1velJlcXVlc3RGdWxsU2NyZWVuKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodmMud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4pIHsKICAgICAgICAgICAgICAgIHZjLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodmMubXNSZXF1ZXN0RnVsbHNjcmVlbikgewogICAgICAgICAgICAgICAgdmMubXNSZXF1ZXN0RnVsbHNjcmVlbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKHRydWUpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGlzRnVsbFNjcmVlbigpIHsKICAgICAgICByZXR1cm4gISEoZG9jLmZ1bGxTY3JlZW4gfHwgZG9jLndlYmtpdElzRnVsbFNjcmVlbiB8fCBkb2MubW96RnVsbFNjcmVlbiB8fCBkb2MubXNGdWxsc2NyZWVuRWxlbWVudCB8fCBkb2MuZnVsbHNjcmVlbkVsZW1lbnQpOwogICAgfQogICAgZnVuY3Rpb24gc2V0RnVsbHNjcmVlbkRhdGEoc3RhdGUpIHsKICAgICAgICB2aWRlb0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtZnVsbHNjcmVlbicsICcnICsgISFzdGF0ZSk7CiAgICAgICAgc3RhdGUgPyB2aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmdWxsc2NyZWVuJykgOiB2aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsc2NyZWVuJyk7CiAgICB9CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgZnVuY3Rpb24gKCkgewogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhKGRvYy5mdWxsU2NyZWVuIHx8IGRvYy5mdWxsc2NyZWVuRWxlbWVudCkpOwogICAgfSk7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJywgZnVuY3Rpb24gKCkgewogICAgICAgIHNldEZ1bGxzY3JlZW5EYXRhKCEhZG9jLndlYmtpdElzRnVsbFNjcmVlbik7CiAgICB9KTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vemZ1bGxzY3JlZW5jaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2V0RnVsbHNjcmVlbkRhdGEoISFkb2MubW96RnVsbFNjcmVlbik7CiAgICB9KTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21zZnVsbHNjcmVlbmNoYW5nZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICBzZXRGdWxsc2NyZWVuRGF0YSghIWRvYy5tc0Z1bGxzY3JlZW5FbGVtZW50KTsKICAgIH0pOwogICAgLyoKICAgICoqIFV0aWxzCiAgICAqLwogICAgZnVuY3Rpb24gZ2V0RGV2aWNlSW5mbygpIHsKICAgICAgICBjb25zdCBpc01vYmlsZSA9IC9BbmRyb2lkfHdlYk9TfFNhbXN1bmdCcm93c2VyfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsKICAgICAgICBjb25zdCBpc0FuZHJvaWQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImFuZHJvaWQiKSA+IC0xOwogICAgICAgIGNvbnN0IGlzU2Ftc3VuZ0Jyb3dzZXIgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9TYW1zdW5nQnJvd3Nlci9pKSB8fCBmYWxzZTsKICAgICAgICBjb25zdCBpc1NhZmFyaSA9IC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7CiAgICAgICAgY29uc3QgaXNJb3MgPSAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAod2luZG93Lk1TU3RyZWFtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgbWF0Y2ggPSAobmF2aWdhdG9yLmFwcFZlcnNpb24pLm1hdGNoKC9PUyAoXGQrKV8oXGQrKV8/KFxkKyk/Lyk7CiAgICAgICAgICAgIGxldCB2ZXJzaW9uOwogICAgICAgICAgICBpZiAobWF0Y2ggIT09IHVuZGVmaW5lZCAmJiBtYXRjaCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdmVyc2lvbiA9IFsKICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtYXRjaFsxXSwgMTApLAogICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KG1hdGNoWzJdLCAxMCksCiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQobWF0Y2hbM10gfHwgMCwgMTApCiAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmVyc2lvbi5qb2luKCcuJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0pKCk7CiAgICAgICAgY29uc3QgY2FuUGxheUlubGluZSA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnN0IHYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpOwogICAgICAgICAgICB2Lm11dGVkID0gdHJ1ZTsKICAgICAgICAgICAgdi5wbGF5KCkuY2F0Y2goKGUpID0+IHsgfSk7CiAgICAgICAgICAgIHJldHVybiAhdi5wYXVzZWQgfHwgKCdwbGF5c0lubGluZScgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKSk7CiAgICAgICAgfSkoKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpc01vYmlsZTogaXNNb2JpbGUsCiAgICAgICAgICAgIGlzQW5kcm9pZDogaXNBbmRyb2lkLAogICAgICAgICAgICBpc1NhbXN1bmdCcm93c2VyOiBpc1NhbXN1bmdCcm93c2VyLAogICAgICAgICAgICBpc1NhZmFyaTogaXNTYWZhcmksCiAgICAgICAgICAgIGlzSW9zOiBpc0lvcywKICAgICAgICAgICAgY2FuUGxheUlubGluZTogY2FuUGxheUlubGluZQogICAgICAgIH07CiAgICB9CiAgICBmdW5jdGlvbiBkZXNlcmlhbGl6ZVNldHRpbmdzKHNldHRpbmdzKSB7CiAgICAgICAgY29uc3QgcyA9IHt9OwogICAgICAgIC8vIFZpZGVvIHNldHRpbmdzL3Byb3BlcnRpZXMKICAgICAgICBzLnVybCA9IHNldHRpbmdzLnVybDsKICAgICAgICBzLmF1dG9wbGF5ID0gc2V0dGluZ3MuYXV0b3BsYXk7CiAgICAgICAgcy5sb29wID0gc2V0dGluZ3MubG9vcDsKICAgICAgICBzLmNvbnRyb2xzID0gc2V0dGluZ3MuY29udHJvbHM7CiAgICAgICAgcy52b2x1bWUgPSBzZXR0aW5ncy52b2x1bWUgfHwgMDsKICAgICAgICBzLnN0YXJ0VGltZSA9IHNldHRpbmdzLnN0YXJ0VGltZSB8fCAwOwogICAgICAgIHMuZW5kVGltZSA9IHNldHRpbmdzLmVuZFRpbWU7CiAgICAgICAgcy5wbGF5YmFja1JhdGUgPSAocGFyc2VGbG9hdChzZXR0aW5ncy5wbGF5YmFja1JhdGUpIHx8IDEpOwogICAgICAgIHMucG9zdGVyID0gZ2V0QWRqdXN0ZWRVcmwoc2V0dGluZ3MucG9zdGVyIHx8ICcnKTsKICAgICAgICAvLyBTcGVjaWFsIHNldHRpbmdzCiAgICAgICAgcy5wbGF5ZXJCYWNrZ3JvdW5kID0gc2V0dGluZ3MucGxheWVyQmFja2dyb3VuZDsKICAgICAgICBzLmdyYXlTY2FsZSA9IHNldHRpbmdzLmdyYXlTY2FsZTsKICAgICAgICBzLmxvb3BXaXRoQmFubmVyID0gc2V0dGluZ3MubG9vcFdpdGhCYW5uZXI7CiAgICAgICAgcy5zdG9wV2l0aENyZWF0aXZlID0gc2V0dGluZ3Muc3RvcFdpdGhDcmVhdGl2ZTsKICAgICAgICBzLmJhY2tncm91bmRGaWxsID0gc2V0dGluZ3MuYmFja2dyb3VuZEZpbGw7CiAgICAgICAgcy5mYWxsYmFja0ltYWdlID0gZ2V0QWRqdXN0ZWRVcmwoc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSB8fCAnJyk7CiAgICAgICAgcy5wbGF5UGF1c2VCdXR0b25TaXplID0gc2V0dGluZ3MucGxheVBhdXNlQnV0dG9uU2l6ZSB8fCA0MDsKICAgICAgICBzLnZvbHVtZVRvZ2dsZUJ1dHRvbiA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvbjsKICAgICAgICBzLnZvbHVtZVRvZ2dsZUJ1dHRvblNpemUgPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25TaXplOwogICAgICAgIHMudm9sdW1lVG9nZ2xlQnV0dG9uQ29sb3IgPSBzZXR0aW5ncy52b2x1bWVUb2dnbGVCdXR0b25Db2xvcjsKICAgICAgICBzLnZvbHVtZVRvZ2dsZUJ1dHRvblBvc2l0aW9uVG9wID0gc2V0dGluZ3Mudm9sdW1lVG9nZ2xlQnV0dG9uUG9zaXRpb25Ub3AgfHwgMDsKICAgICAgICBzLnZvbHVtZVRvZ2dsZUJ1dHRvblBvc2l0aW9uTGVmdCA9IHNldHRpbmdzLnZvbHVtZVRvZ2dsZUJ1dHRvblBvc2l0aW9uTGVmdCB8fCAwOwogICAgICAgIHJldHVybiBzOwogICAgfQogICAgZnVuY3Rpb24gdG9GcmFjdGlvbnMobikgewogICAgICAgIHJldHVybiBuIDwgMSA/IG4KICAgICAgICAgICAgOiBuID4gMTAwID8gMQogICAgICAgICAgICAgICAgOiAhbiA/IDAKICAgICAgICAgICAgICAgICAgICA6IG4gLyAxMDA7CiAgICB9CiAgICBmdW5jdGlvbiBmb3JtYXRUaW1lKHQpIHsKICAgICAgICByZXR1cm4gdCA/ICh0IC0gKHQgJT0gNjApKSAvIDYwICsgKDkuNSA8IHQgPyAnOicgOiAnOjAnKSArIE1hdGgucm91bmQodCkgOiAnMDowMCc7CiAgICB9CiAgICAvKgogICAgKiogRXhwb3NlCiAgICAqLwogICAgdGhpcy5zZXRWaWRlb1NldHRpbmdzID0gc2V0VmlkZW9TZXR0aW5nczsKICAgIHRoaXMuZ2V0VmlkZW9TZXR0aW5ncyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9zZXR0aW5nczsgfTsKICAgIHRoaXMuc2V0RmlsbE9wdGlvbiA9IHNldEZpbGxPcHRpb247CiAgICB0aGlzLnBsYXkgPSBwbGF5VmlkZW87CiAgICB0aGlzLnJlc3RhcnQgPSByZXN0YXJ0VmlkZW87CiAgICB0aGlzLnBhdXNlID0gcGF1c2VWaWRlbzsKICAgIHRoaXMuc3RvcCA9IHN0b3BWaWRlbzsKICAgIHRoaXMubG9hZFZpZGVvID0gbG9hZFZpZGVvOwogICAgdGhpcy5zZXRWb2x1bWUgPSBzZXRWb2x1bWU7CiAgICB0aGlzLnRvZ2dsZU11dGUgPSB0b2dnbGVNdXRlOwogICAgdGhpcy5zZWVrVG8gPSBzZWVrVG87CiAgICB0aGlzLnZpZGVvID0gX3ZpZGVvOwogICAgdGhpcy5wb3N0ZXIgPSBwb3N0ZXI7CiAgICB0aGlzLmhhc1BsYXllZCA9IGFscmVhZHlQbGF5ZWQ7Cn0KZnVuY3Rpb24gVmlkZW9UcmFja2luZyhvcHRpb25zKSB7CiAgICAvKgogICAgKiogIFRoaXMgbWV0aG9kIGJ1YmJsZXMgdXAgZXZlbnRzIHRvIHRoZSBCYW5uZXIvQ3VzdG9tIHNjcmlwdAogICAgKiogIGFuZCBpcyB1c2VkIHRvIHNlbmQgdmlkZW8gdHJhY2tpbmcgZXZlbnRzCiAgICAqLwogICAgbGV0IHVybCA9IG9wdGlvbnMudXJsOwogICAgbGV0IGZpbGVuYW1lID0gb3B0aW9ucy5maWxlbmFtZTsKICAgIC8vIE9uY2UgcGVyIHZpZXcgPSBPUFYKICAgIGxldCBoYXNDb21wbGV0ZWQgPSBmYWxzZTsgLy8gT1BWCiAgICBsZXQgaXNJbml0ID0gZmFsc2U7IC8vIE9QVgogICAgbGV0IHN0YXJ0ZWQgPSBmYWxzZTsgLy8gT1BWCiAgICBsZXQgcmVhY2hlZEZRID0gZmFsc2U7IC8vIE9QVgogICAgbGV0IHJlYWNoZWRNUCA9IGZhbHNlOyAvLyBPUFYKICAgIGxldCByZWFjaGVkVFEgPSBmYWxzZTsgLy8gT1BWCiAgICAvLyBWaWRlbyBpbml0aWFsaXplZCAKICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoaXNJbml0KQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaXNJbml0ID0gdHJ1ZTsKICAgIH07CiAgICAvLyBWaWRlbyBzdGFydGVkIG9yIHBsYXlpbmcgZnJvbSBiZWdpbm5pbmcgYWdhaW4KICAgIHRoaXMuc3RhcnRlZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoVGltZWxpbmUuY3VycmVudFRpbWUgPj0gV2lkZ2V0LnRpbWUpIHsKICAgICAgICAgICAgaWYgKHN0YXJ0ZWQpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMCB9KTsKICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7CiAgICAgICAgfQogICAgfTsKICAgIC8vIFZpZGVvIHJlYWNoZWQgdGhlIEZpcnN0IFF1YXJ0aWxlCiAgICB0aGlzLmZxID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChyZWFjaGVkRlEgfHwgIXN0YXJ0ZWQpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBBZC50cmFja0N1c3RvbVByb2dyZXNzRXZlbnQoeyBuYW1lOiAnVmlkZW8gY29tcGxldGlvbicsIGlkOiB1cmwsIGxhYmVsOiBmaWxlbmFtZSwgdmFsdWU6IDAuMjUgfSk7CiAgICAgICAgcmVhY2hlZEZRID0gdHJ1ZTsKICAgIH07CiAgICAvLyBWaWRlbyByZWFjaGVkIHRoZSBNaWRwb2ludAogICAgdGhpcy5tcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAocmVhY2hlZE1QKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAwLjUgfSk7CiAgICAgICAgcmVhY2hlZE1QID0gdHJ1ZTsKICAgIH07CiAgICAvLyBWaWRlbyByZWFjaGVkIHRoZSBUaGlyZCBxdWFydGlsZQogICAgdGhpcy50cSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAocmVhY2hlZFRRKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgQWQudHJhY2tDdXN0b21Qcm9ncmVzc0V2ZW50KHsgbmFtZTogJ1ZpZGVvIGNvbXBsZXRpb24nLCBpZDogdXJsLCBsYWJlbDogZmlsZW5hbWUsIHZhbHVlOiAwLjc1IH0pOwogICAgICAgIHJlYWNoZWRUUSA9IHRydWU7CiAgICB9OwogICAgLy8gVmlkZW8gaGFzIGNvbXBsZXRlZAogICAgdGhpcy5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGhhc0NvbXBsZXRlZCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIEFkLnRyYWNrQ3VzdG9tUHJvZ3Jlc3NFdmVudCh7IG5hbWU6ICdWaWRlbyBjb21wbGV0aW9uJywgaWQ6IHVybCwgbGFiZWw6IGZpbGVuYW1lLCB2YWx1ZTogMSB9KTsKICAgICAgICBoYXNDb21wbGV0ZWQgPSB0cnVlOwogICAgfTsKfQpmdW5jdGlvbiBnZXRBZGp1c3RlZFVybCh0ZXh0KSB7CiAgICBpZiAodGV4dCkgewogICAgICAgIGxldCB1cmwgPSB0ZXh0CiAgICAgICAgICAgIC5yZXBsYWNlKC92aWRlby5iYW5uZXJmbG93LmNvbS9nLCAnYy5iYW5uZXJmbG93Lm5ldC9iZi12aWRlb3MnKQogICAgICAgICAgICAucmVwbGFjZSgvKFxyXG58XG58XHJ8XHMpL2dtLCAnJyk7CiAgICAgICAgaWYgKEFkLmN1c3RvbURvbWFpbikgewogICAgICAgICAgICAvLyBSZW1vdmUgaHR0cHxzIHJlcGxhY2VtZW50IHdoZW4gQWQuY3VzdG9tRG9tYWluIG9ubHkgZ2l2ZXMgdGhlIGRvbWFpbgogICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgnYy5iYW5uZXJmbG93Lm5ldCcsIEFkLmN1c3RvbURvbWFpbi5yZXBsYWNlKC8oaHR0cHxodHRwcyk6XC9cLy8sICcnKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB1cmw7CiAgICB9Cn0KZnVuY3Rpb24gdG9SZWxhdGl2ZVRpbWUodGltZSkgewogICAgaWYgKHR5cGVvZiB0aW1lID09PSAnc3RyaW5nJykgewogICAgICAgIHRpbWUgPSBOdW1iZXIodGltZSk7CiAgICB9CiAgICBpZiAoaXNOYU4odGltZSkgfHwgdHlwZW9mIHRpbWUgIT09ICdudW1iZXInKSB7CiAgICAgICAgdGltZSA9IDA7CiAgICB9CiAgICByZXR1cm4gTWF0aC5hYnModmlkZW9TZXR0aW5ncy5zdGFydFRpbWUgKyB0aW1lIC0gV2lkZ2V0LnRpbWUpOwp9ClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuU2VlaywgdGltZSA9PiB7CiAgICBpZiAodmlkZW8pIHsKICAgICAgICB2aWRlby5zZWVrVG8odG9SZWxhdGl2ZVRpbWUodGltZSkpOwogICAgfQp9KTsKVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5QbGF5LCB0aW1lID0+IHsKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmICh2aWRlbykgewogICAgICAgICAgICBpZiAodmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmF1dG9wbGF5KSB7CiAgICAgICAgICAgICAgICB2aWRlby5wb3N0ZXIuc3R5bGUuc2V0UHJvcGVydHkoImRpc3BsYXkiLCAibm9uZSIsICJpbXBvcnRhbnQiKTsKICAgICAgICAgICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JyAmJiAodGltZSA+PSBXaWRnZXQudGltZSAmJiB0aW1lIDwgV2lkZ2V0LmR1cmF0aW9uKSkgewogICAgICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnY3JlYXRpdmUnIHx8ICFDcmVhdGl2ZS5lbnZpcm9ubWVudCkgJiYgIXVzZXJJbml0aWF0ZWRQYXVzZSAmJiB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuYXV0b3BsYXkgJiYgKHRpbWUgPj0gV2lkZ2V0LnRpbWUgJiYgdGltZSA8IFdpZGdldC5kdXJhdGlvbikpIHsKICAgICAgICAgICAgICAgIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuYXV0b3BsYXkpIHsKICAgICAgICAgICAgICAgICAgICB2aWRlby5wb3N0ZXIuc3R5bGUuc2V0UHJvcGVydHkoImRpc3BsYXkiLCAibm9uZSIsICJpbXBvcnRhbnQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sIDApOwp9KTsKVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5QYXVzZSwgdGltZSA9PiB7CiAgICBpZiAodmlkZW8pIHsKICAgICAgICB2aWRlby5wYXVzZSgpOwogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JykgewogICAgICAgICAgICB2aWRlby50b2dnbGVNdXRlKHRydWUpOwogICAgICAgICAgICB1c2VySW5pdGlhdGVkUGF1c2UgPSBmYWxzZTsKICAgICAgICAgICAgdmlkZW8uc2Vla1RvKE1hdGguYWJzKHRpbWUgLSBXaWRnZXQudGltZSkpOwogICAgICAgIH0KICAgIH0KfSk7CldpZGdldC5vbihXaWRnZXRFdmVudC5SZXNpemUsICgpID0+IHsKICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JykgewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBpZiAodmlkZW8gJiYgdmlkZW9TZXR0aW5ncy51cmwpIHsKICAgICAgICAgICAgICAgIHZpZGVvLnNldEZpbGxPcHRpb24oKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIDApOwogICAgfQp9KTsKV2lkZ2V0Lm9uKFdpZGdldEV2ZW50LlByb3BlcnR5Q2hhbmdlZCwgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgewogICAgaWYgKCFXaWRnZXQucHJvcGVydGllcy5zaG93UGxheVBhdXNlKSB7CiAgICAgICAgcGxheVBhdXNlT3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdvbkhvdmVyJyk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICBwbGF5UGF1c2VPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ29uSG92ZXInKTsKICAgIH0KICAgIGZlZWRJdGVyYXRpb25JbmRleCA9IE1hdGgubWF4KDAsIFdpZGdldC5wcm9wZXJ0aWVzLmZlZWRJbmRleCAtIDEpOwogICAgY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMSc7CiAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMucm91bmRDb3JuZXJzKSB7CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLWJvcmRlci1yJywgYCR7V2lkZ2V0LnByb3BlcnRpZXMucm91bmRDb3JuZXJzfXB4YCk7CiAgICB9CiAgICB5aWVsZCBzZXRTZXR0aW5ncygpOwogICAgbGV0IHVybDsKICAgIGlmIChXaWRnZXQucHJvcGVydGllcy51c2VGZWVkICYmIGZlZWRVcmwpIHsKICAgICAgICB1cmwgPSBmZWVkVXJsOwogICAgfQogICAgZWxzZSBpZiAoV2lkZ2V0LnByb3BlcnRpZXMudXJsKSB7CiAgICAgICAgdXJsID0gV2lkZ2V0LnByb3BlcnRpZXMudXJsOwogICAgfQogICAgaWYgKCF1cmwpIHsKICAgICAgICBpbnN0cnVjdGlvbnMuY2xhc3NMaXN0LmFkZCgnc2hvdycpOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIGVsc2UgewogICAgICAgIGluc3RydWN0aW9ucy5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgICB9CiAgICBpZiAoIXZpZGVvKSB7CiAgICAgICAgY3JlYXRlVmlkZW8oKTsKICAgIH0KICAgIGlmICh2aWRlbyAmJiB1cmwgIT09IHZpZGVvLmdldFZpZGVvU2V0dGluZ3MoKS51cmwpIHsKICAgICAgICB2aWRlby5sb2FkVmlkZW8oc3RyaXAodXJsKSk7CiAgICB9CiAgICBpZiAodmlkZW8gJiYgdmlkZW9TZXR0aW5ncy51cmwpIHsKICAgICAgICB2aWRlby5zZXRWaWRlb1NldHRpbmdzKHZpZGVvU2V0dGluZ3MpOwogICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JykgewogICAgICAgICAgICB2aWRlby5wYXVzZSgpOwogICAgICAgIH0KICAgIH0KfSkpOwpXaWRnZXQub24oV2lkZ2V0RXZlbnQuQW5pbWF0aW9uU3RhcnQsICgpID0+IHsKICAgIGlmICh2aWRlbyAmJiAhaGFzU3RvcHBlZCkgewogICAgICAgIGlmICh2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuYXV0b3BsYXkpIHsKICAgICAgICAgICAgaWYgKGZpcnN0UGxheVRocm91Z2ggJiYgVGltZWxpbmUuaXNQbGF5aW5nKSB7CiAgICAgICAgICAgICAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMubG9vcFdpdGhCYW5uZXIgfHwgZmlyc3RQbGF5VGhyb3VnaCkgewogICAgICAgICAgICAgICAgICAgIHZpZGVvLnNlZWtUbyhXaWRnZXQucHJvcGVydGllcy5zdGFydFRpbWUpOwogICAgICAgICAgICAgICAgICAgIGZpcnN0UGxheVRocm91Z2ggPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTsKICAgICAgICAgICAgICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3JykgewogICAgICAgICAgICAgICAgICAgIGZpcnN0UGxheVRocm91Z2ggPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAodmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLmxvb3BXaXRoQmFubmVyICYmICF1c2VySW5pdGlhdGVkUGF1c2UpIHsKICAgICAgICAgICAgaWYgKFRpbWVsaW5lLmlzUGxheWluZyAmJiB2aWRlby5oYXNQbGF5ZWQoKSkgewogICAgICAgICAgICAgICAgdmlkZW8uc2Vla1RvKFdpZGdldC5wcm9wZXJ0aWVzLnN0YXJ0VGltZSk7CiAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnaW1hZ2UnKSB7CiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7CiAgICAgICAgfQogICAgfQogICAgaWYgKHZpZGVvICYmICF2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuYXV0b3BsYXkpIHsKICAgICAgICBpZiAoVGltZWxpbmUuZHVyYXRpb24gIT09IFdpZGdldC5kdXJhdGlvbikgewogICAgICAgICAgICB2aWRlby50b2dnbGVNdXRlKG11dGVkU3RhdGUpOwogICAgICAgIH0KICAgIH0KfSk7CldpZGdldC5vbihXaWRnZXRFdmVudC5BbmltYXRpb25FbmQsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsKICAgIGlmIChUaW1lbGluZS5kdXJhdGlvbiAhPT0gV2lkZ2V0LmR1cmF0aW9uKSB7CiAgICAgICAgbXV0ZWRTdGF0ZSA9IHZpZGVvLnZpZGVvLm11dGVkOwogICAgICAgIHZpZGVvLnRvZ2dsZU11dGUodHJ1ZSk7CiAgICB9CiAgICBpZiAoIVdpZGdldC5wcm9wZXJ0aWVzLnN0YXRpY0luZGV4ICYmIFdpZGdldC5wcm9wZXJ0aWVzLnVzZUZlZWQpIHsKICAgICAgICBpZiAoZmVlZCAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleCArIDFdICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4ICsgMV1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgewogICAgICAgICAgICBmZWVkSXRlcmF0aW9uSW5kZXgrKzsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGZlZWRJdGVyYXRpb25JbmRleCA9IDA7CiAgICAgICAgfQogICAgICAgIGlmIChmZWVkICYmIGZlZWRbZmVlZEl0ZXJhdGlvbkluZGV4XSAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXSkgewogICAgICAgICAgICB5aWVsZCBzZXRTZXR0aW5ncygpOwogICAgICAgICAgICBmZWVkVXJsID0gZmVlZFtmZWVkSXRlcmF0aW9uSW5kZXhdW1dpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZF0udmFsdWU7CiAgICAgICAgICAgIHZpZGVvLmxvYWRWaWRlbyhzdHJpcChmZWVkVXJsKSk7CiAgICAgICAgICAgIHZpZGVvLnNldFZpZGVvU2V0dGluZ3ModmlkZW9TZXR0aW5ncyk7CiAgICAgICAgfQogICAgfQp9KSk7CldpZGdldC5vbihXaWRnZXRFdmVudC5TaG93UHJlbG9hZEltYWdlLCAoKSA9PiB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBpZiAoV2lkZ2V0LnByb3BlcnRpZXMuZmFsbGJhY2tJbWFnZSkgewogICAgICAgICAgICB2aWRlby5wYXVzZSgpOwogICAgICAgICAgICB2aWRlby5wb3N0ZXIuc3R5bGUuc2V0UHJvcGVydHkoImRpc3BsYXkiLCAiYmxvY2siLCAiaW1wb3J0YW50Iik7CiAgICAgICAgICAgIHZpZGVvLnBvc3Rlci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyB2aWRlby5nZXRWaWRlb1NldHRpbmdzKCkuZmFsbGJhY2tJbWFnZSArICcpJzsKICAgICAgICB9CiAgICB9LCAwKTsKfSk7CldpZGdldC5wcm9wZXJ0aWVzLmR5bmFtaWNDb250ZW50LmNoYW5nZSgoZmVlZERhdGEpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsKICAgIGZlZWRJdGVyYXRpb25JbmRleCA9IE1hdGgubWF4KDAsIFdpZGdldC5wcm9wZXJ0aWVzLmZlZWRJbmRleCAtIDEpOwogICAgZmVlZCA9IGZlZWREYXRhLmRhdGE7CiAgICBpZiAoZmVlZCAmJiBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF0gJiYgZmVlZFtmZWVkSXRlcmF0aW9uSW5kZXhdW1dpZGdldC5wcm9wZXJ0aWVzLmZlZWRGaWVsZF0pIHsKICAgICAgICB5aWVsZCBzZXRTZXR0aW5ncygpOwogICAgICAgIGZlZWRVcmwgPSBmZWVkW2ZlZWRJdGVyYXRpb25JbmRleF1bV2lkZ2V0LnByb3BlcnRpZXMuZmVlZEZpZWxkXS52YWx1ZTsKICAgICAgICB2aWRlby5sb2FkVmlkZW8oc3RyaXAoZmVlZFVybCkpOwogICAgICAgIHZpZGVvLnNldFZpZGVvU2V0dGluZ3ModmlkZW9TZXR0aW5ncyk7CiAgICB9Cn0pKTsKVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5Mb29wLCAoKSA9PiB7CiAgICBpZiAoaGFzU3RvcHBlZCkgewogICAgICAgIHZpZGVvLnBhdXNlKCk7CiAgICAgICAgcmV0dXJuOwogICAgfQp9KTsKVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5TdG9wLCAoKSA9PiB7CiAgICBpZiAodmlkZW8gJiYgdmlkZW8uZ2V0VmlkZW9TZXR0aW5ncygpLnN0b3BXaXRoQ3JlYXRpdmUpIHsKICAgICAgICB2aWRlby5zdG9wKCk7CiAgICAgICAgaGFzU3RvcHBlZCA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKENyZWF0aXZlLmVudmlyb25tZW50ID09PSAnY3JlYXRpdmUnKSB7CiAgICAgICAgdmlkZW8ucGxheSgpOwogICAgfQp9KTsK",customProperties:[{label:"Url",name:"url",unit:"text",value:"{\"text\":\"https://video.bannerflow.com/5e55163690c3a51d28cd4986/728x90-334b399ce32d41c7b1c50f3dc36aab7c.mp4\",\"styles\":[{\"type\":\"word\",\"length\":97,\"position\":0,\"styleIds\":[]}]}",versionPropertyId:"b583199c-94dc-4576-9809-1e5304ece412"},{label:"Feed",name:"dynamicContent",unit:"feed",value:"{\"id\":\"\",\"path\":\"\",\"step\":{\"start\":1,\"size\":1,\"occurrence\":\"loop\"},\"fallback\":\"\"}",versionPropertyId:"6cf491d8-6edf-4c73-80a0-876a82ddd655"},{label:"Feed field",name:"feedField",unit:"text",value:"{\"text\":\"\",\"styles\":[]}",versionPropertyId:"43adfcec-8bad-4d14-8e1a-511a2e5389b7"},{label:"Use feed",name:"useFeed",unit:"boolean",value:false,versionPropertyId:undefined},{label:"Feed index",name:"feedIndex",unit:"number",value:1,versionPropertyId:undefined},{label:"Static index",name:"staticIndex",unit:"boolean",value:false,versionPropertyId:undefined},{label:"Autoplay",name:"autoplay",unit:"boolean",value:true,versionPropertyId:undefined},{label:"Controls",name:"controls",unit:"boolean",value:false,versionPropertyId:undefined},{label:"Show play/pause when playing",name:"showPlayPause",unit:"boolean",value:false,versionPropertyId:undefined},{label:"Loop",name:"loop",unit:"boolean",value:true,versionPropertyId:undefined},{label:"Loop with creative",name:"loopWithBanner",unit:"boolean",value:true,versionPropertyId:undefined},{label:"Volume toggle button",name:"volumeToggleButton",unit:"boolean",value:false,versionPropertyId:undefined},{label:"Volume",name:"volume",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button color",name:"volumeToggleButtonColor",unit:"color",value:"rgba(255,255,255,1)",versionPropertyId:undefined},{label:"Volume button size",name:"volumeToggleButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Volume button left",name:"volumeToggleButtonPositionLeft",unit:"number",value:5,versionPropertyId:undefined},{label:"Volume button top",name:"volumeToggleButtonPositionTop",unit:"number",value:5,versionPropertyId:undefined},{label:"Play/Pause button size",name:"playPauseButtonSize",unit:"number",value:0,versionPropertyId:undefined},{label:"Start time",name:"startTime",unit:"number",value:0,versionPropertyId:undefined},{label:"End time",name:"endTime",unit:"number",value:0,versionPropertyId:undefined},{label:"Preload image",name:"fallbackImage",unit:"image",value:"1341865 https://c.bannerflow.net/accounts/soft2bet/63e10827ee6588a96cb203e2/images/66b6a07b-d4c9-43c5-9c75-9b3cefadbfd0.jpg",versionPropertyId:undefined},{label:"Poster",name:"poster",unit:"image",value:"1341866 https://c.bannerflow.net/accounts/soft2bet/63e10827ee6588a96cb203e2/images/beed61d4-8f31-4b12-8f70-08986d296008.jpg",versionPropertyId:undefined},{label:"Fill",name:"backgroundFill",unit:"select",value:"W3sidmFsdWUiOiJDb3ZlciIsInNlbGVjdGVkIjp0cnVlfSx7InZhbHVlIjoiQ29udGFpbiIsInNlbGVjdGVkIjpmYWxzZX1d",versionPropertyId:undefined},{label:"Playback rate",name:"playbackRate",unit:"select",value:"W3sidmFsdWUiOiIxIiwic2VsZWN0ZWQiOnRydWV9LHsidmFsdWUiOiIwLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMC41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjAuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIxLjI1Iiwic2VsZWN0ZWQiOmZhbHNlfSx7InZhbHVlIjoiMS41MCIsInNlbGVjdGVkIjpmYWxzZX0seyJ2YWx1ZSI6IjEuNzUiLCJzZWxlY3RlZCI6ZmFsc2V9LHsidmFsdWUiOiIyIiwic2VsZWN0ZWQiOmZhbHNlfV0=",versionPropertyId:undefined},{label:"Gray Scale",name:"grayScale",unit:"number",value:0,versionPropertyId:undefined},{label:"Player background",name:"playerBackground",unit:"color",value:"rgba(0,0,0,0)",versionPropertyId:undefined},{label:"Stop with creative",name:"stopWithCreative",unit:"boolean",value:false,versionPropertyId:undefined},{label:"Round corners",name:"roundCorners",unit:"number",value:0,versionPropertyId:undefined}],},{kind:'text',id:'db8e2f82-8684-4f73-a847-21d7dd2b355b',time:0,hidden:false,duration:12,animations:[],states:[],actions:[],x:5,y:546,width:272,height:60,radius:{"type":"joint","topLeft":0,"topRight":0,"bottomRight":0,"bottomLeft":0},originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{},textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"middle",horizontalAlignment:"center",maxRows:0,lineHeight:1.3,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0,uppercase:false,underline:false,strikethrough:false,fontSize:16,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"middle",maxRows:0,textOverflow:"shrink",characterSpacing:0,lineHeight:1.3,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"18+",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"|",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"Please",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"play",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"responsibly",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},assetId:'63e10f336224cd6b6340dc07'},{kind:'rectangle',id:'d6d16759-39e3-42f5-b192-b1e4390a2321',time:0,hidden:false,duration:12,animations:[],states:[],actions:[],x:-15,y:55,width:786,height:35,fill:Color.parse('linear-gradient(0.5 1 rgba(0,28,82,1),0.5 0 rgba(0,28,82,0))'),radius:{"type":"joint","topLeft":0,"topRight":0,"bottomRight":0,"bottomLeft":0},originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{}},{kind:'text',id:'46309b94-c620-4739-82f0-cabc74933950',time:0,hidden:false,duration:12,animations:[],states:[],actions:[],x:6,y:66,width:355,height:26,radius:{"type":"joint","topLeft":0,"topRight":0,"bottomRight":0,"bottomLeft":0},originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{},textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"middle",horizontalAlignment:"left",maxRows:0,lineHeight:1.3,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0,uppercase:false,underline:false,strikethrough:false,fontSize:11,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"middle",maxRows:0,textOverflow:"shrink",characterSpacing:0,lineHeight:1.3,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"18+",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"|",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"Gioca",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"Responsabilmente",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},assetId:'63e10f336224cd6b6340dc07'},{kind:'text',id:'8bad5c98-90ee-4080-ab72-3703d71200af',time:0.01,hidden:false,duration:3,animations:[{id:'c5f17afb-fdce-4cf6-9b6b-b8763a7bdf17',type:'in',timingFunction:'easeOutBack',templateId:'flip-in',settings:{direction:{"name":"Direction","value":90}},keyframes:[{id:"314eb447-1674-4de5-8aab-4a17eb788325",stateId:"a5547ba6-6ef2-4074-919c-5ea469c688da",time:0,timingFunction:undefined,duration:0},{id:"696c30c1-0b71-42b5-93ff-b8fab5ab236b",stateId:undefined,time:0.4,timingFunction:"@timingFunction",duration:0}]},{id:'bcefb961-4d29-4349-b969-11a1d1929017',type:'out',timingFunction:'easeInBack',templateId:'flip-out',settings:{direction:{"name":"Direction","value":270}},keyframes:[{id:"6bebf83c-a351-41b6-a774-cb2406cfff50",stateId:undefined,time:2.6,timingFunction:undefined,duration:0},{id:"cef769a7-d644-4daa-a54b-e1d1273393a0",stateId:"475f7be9-5881-4d9d-9b7e-8dda04391182",time:3,timingFunction:"@timingFunction",duration:0}]},],states:[{id:'a5547ba6-6ef2-4074-919c-5ea469c688da',rotationX:"abs(sin(@transition.direction * (pi / 180)) * @value) - cos(@transition.direction * (pi / 180)) * pi / 2",rotationY:"abs(cos(@transition.direction * (pi / 180)) * @value) - sin(@transition.direction * (pi / 180)) * pi / 2",},{id:'475f7be9-5881-4d9d-9b7e-8dda04391182',rotationX:"abs(sin(@transition.direction * (pi / 180)) * @value) - cos(@transition.direction * (pi / 180)) * pi / 2",rotationY:"abs(cos(@transition.direction * (pi / 180)) * @value) - sin(@transition.direction * (pi / 180)) * pi / 2",},],actions:[],x:184,y:-80,width:388,height:250,radius:{"type":"joint","topLeft":0,"topRight":0,"bottomRight":0,"bottomLeft":0},originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{},textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"middle",horizontalAlignment:"left",maxRows:0,lineHeight:1,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0,uppercase:false,underline:false,strikethrough:false,textShadows:[{offsetX:4,offsetY:4,blur:5,color:Color.parse('rgba(0,0,0,1)')}],fontSize:24,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"middle",maxRows:0,textOverflow:"shrink",characterSpacing:0,lineHeight:1,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"BONUS",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"newline",style:{},content:"\n",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{textColor:Color.parse('rgba(255,220,38,1)'),},content:"EURO",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{textColor:Color.parse('rgba(255,220,38,1)'),},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{textColor:Color.parse('rgba(255,220,38,1)'),},content:"2024",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{textColor:Color.parse('rgba(255,220,38,1)'),},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"newline",style:{},content:"\n",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"FINO",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"A",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{textColor:Color.parse('rgba(255,220,38,1)'),},content:"150",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},assetId:'63e10f336224cd6b6340dbfd'},{kind:'text',id:'4e3d5665-4a03-4214-9cae-f42ba3ce2db5',time:2.98,hidden:false,duration:3.02,animations:[{id:'eca98e66-8e0a-45d7-ba9b-2c931e169377',type:'in',timingFunction:'easeOutBack',templateId:'flip-in',settings:{direction:{"name":"Direction","value":90}},keyframes:[{id:"9f42a465-15d0-44d1-8286-c0e5d9a66565",stateId:"e08d67d5-5ee7-4f1a-943c-1f571a41d6dc",time:0,timingFunction:undefined,duration:0},{id:"c1a4ea6e-768d-4026-b765-74ac46915140",stateId:undefined,time:0.4,timingFunction:"@timingFunction",duration:0}]},{id:'8b2d254a-879a-4879-8d6b-dd5824edae5b',type:'out',timingFunction:'easeInBack',templateId:'flip-out',settings:{direction:{"name":"Direction","value":270}},keyframes:[{id:"d5532767-2c7e-4ee9-9475-0dc5e253a653",stateId:undefined,time:2.62,timingFunction:undefined,duration:0},{id:"29a97e8d-6219-4859-888b-4c2257f87c8f",stateId:"f5c2ca46-5e86-4f5e-b267-951914625677",time:3.02,timingFunction:"@timingFunction",duration:0}]},],states:[{id:'e08d67d5-5ee7-4f1a-943c-1f571a41d6dc',rotationX:"abs(sin(@transition.direction * (pi / 180)) * @value) - cos(@transition.direction * (pi / 180)) * pi / 2",rotationY:"abs(cos(@transition.direction * (pi / 180)) * @value) - sin(@transition.direction * (pi / 180)) * pi / 2",},{id:'f5c2ca46-5e86-4f5e-b267-951914625677',rotationX:"abs(sin(@transition.direction * (pi / 180)) * @value) - cos(@transition.direction * (pi / 180)) * pi / 2",rotationY:"abs(cos(@transition.direction * (pi / 180)) * @value) - sin(@transition.direction * (pi / 180)) * pi / 2",},],actions:[],x:184,y:-80,width:388,height:250,radius:{"type":"joint","topLeft":0,"topRight":0,"bottomRight":0,"bottomLeft":0},originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{},textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"middle",horizontalAlignment:"left",maxRows:0,lineHeight:1,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0,uppercase:false,underline:false,strikethrough:false,textShadows:[{offsetX:4,offsetY:4,blur:5,color:Color.parse('rgba(0,0,0,1)')}],fontSize:24,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"middle",maxRows:0,textOverflow:"shrink",characterSpacing:0,lineHeight:1,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"E",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"RICCHI",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"newline",style:{},content:"\n",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"PREMI",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"FINO",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"newline",style:{},content:"\n",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"A",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{textColor:Color.parse('rgba(255,220,38,1)'),},content:"15000",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},assetId:'63e10f336224cd6b6340dbfd'},{kind:'text',id:'4bffbcbb-2dd4-48bb-93a8-df382b7a62cb',time:5.97,hidden:false,duration:3.03,animations:[{id:'5399467b-a5f3-4f4f-a7d2-d760f466f9c5',type:'in',timingFunction:'easeOutBack',templateId:'flip-in',settings:{direction:{"name":"Direction","value":90}},keyframes:[{id:"07503576-d80a-448d-81fd-e718b5e797a2",stateId:"1cc131d1-648b-4c00-9eec-b8fe3d6b4d88",time:0,timingFunction:undefined,duration:0},{id:"38e09960-03ca-40f3-84e4-b352dbce2ea4",stateId:undefined,time:0.4,timingFunction:"@timingFunction",duration:0}]},{id:'87cc0e59-4640-4c1a-90cc-fed561d1cf4c',type:'out',timingFunction:'easeInBack',templateId:'flip-out',settings:{direction:{"name":"Direction","value":270}},keyframes:[{id:"f02f6b2a-b906-4049-98f6-9aca2ddd14f2",stateId:undefined,time:2.63,timingFunction:undefined,duration:0},{id:"5df49fef-6b12-40f3-8aed-d5cb6d6d4b39",stateId:"c483b812-7496-4d50-a68a-94a73788b035",time:3.03,timingFunction:"@timingFunction",duration:0}]},],states:[{id:'1cc131d1-648b-4c00-9eec-b8fe3d6b4d88',rotationX:"abs(sin(@transition.direction * (pi / 180)) * @value) - cos(@transition.direction * (pi / 180)) * pi / 2",rotationY:"abs(cos(@transition.direction * (pi / 180)) * @value) - sin(@transition.direction * (pi / 180)) * pi / 2",},{id:'c483b812-7496-4d50-a68a-94a73788b035',rotationX:"abs(sin(@transition.direction * (pi / 180)) * @value) - cos(@transition.direction * (pi / 180)) * pi / 2",rotationY:"abs(cos(@transition.direction * (pi / 180)) * @value) - sin(@transition.direction * (pi / 180)) * pi / 2",},],actions:[],x:184,y:-80,width:388,height:250,radius:{"type":"joint","topLeft":0,"topRight":0,"bottomRight":0,"bottomLeft":0},originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{},textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"middle",horizontalAlignment:"left",maxRows:0,lineHeight:1,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0,uppercase:false,underline:false,strikethrough:false,textShadows:[{offsetX:4,offsetY:4,blur:5,color:Color.parse('rgba(0,0,0,1)')}],fontSize:24,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"middle",maxRows:0,textOverflow:"shrink",characterSpacing:0,lineHeight:1,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"TOP",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"QUOTE",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"newline",style:{},content:"\n",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"MAGGIORATE",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"newline",style:{},content:"\n",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"IN",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{textColor:Color.parse('rgba(255,220,38,1)'),},content:"ITALIA",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},assetId:'63e10f336224cd6b6340dbfd'},{kind:'text',id:'7fe37888-e999-4c3c-b6c0-0799824313c0',time:9,hidden:false,duration:3,animations:[{id:'fb09307a-7753-486b-b74b-8d99493f7d2a',type:'in',timingFunction:'easeOutBack',templateId:'flip-in',settings:{direction:{"name":"Direction","value":90}},keyframes:[{id:"271f2a5b-4234-435a-8876-8a39ea1877fb",stateId:"93f80ff2-e71d-4710-8b6d-e9e7be8099f5",time:0,timingFunction:undefined,duration:0},{id:"cfbf33e9-8885-4384-b12d-2be413cf5c79",stateId:undefined,time:0.4,timingFunction:"@timingFunction",duration:0}]},{id:'1dbb172b-e23d-4e03-8039-9416bca9762c',type:'out',timingFunction:'easeInBack',templateId:'flip-out',settings:{direction:{"name":"Direction","value":270}},keyframes:[{id:"e852865d-c829-4883-9a65-e30206782556",stateId:undefined,time:2.6,timingFunction:undefined,duration:0},{id:"979666ac-e49b-4850-864b-a259afd81f49",stateId:"1e78d381-4c26-4659-b9b5-c3378ba77a0c",time:3,timingFunction:"@timingFunction",duration:0}]},],states:[{id:'93f80ff2-e71d-4710-8b6d-e9e7be8099f5',rotationX:"abs(sin(@transition.direction * (pi / 180)) * @value) - cos(@transition.direction * (pi / 180)) * pi / 2",rotationY:"abs(cos(@transition.direction * (pi / 180)) * @value) - sin(@transition.direction * (pi / 180)) * pi / 2",},{id:'1e78d381-4c26-4659-b9b5-c3378ba77a0c',rotationX:"abs(sin(@transition.direction * (pi / 180)) * @value) - cos(@transition.direction * (pi / 180)) * pi / 2",rotationY:"abs(cos(@transition.direction * (pi / 180)) * @value) - sin(@transition.direction * (pi / 180)) * pi / 2",},],actions:[],x:184,y:-81,width:388,height:250,radius:{"type":"joint","topLeft":0,"topRight":0,"bottomRight":0,"bottomLeft":0},originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{},textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"middle",horizontalAlignment:"left",maxRows:0,lineHeight:1,padding:{"top":0,"left":0,"right":0,"bottom":0},characterSpacing:0,uppercase:false,underline:false,strikethrough:false,textShadows:[{offsetX:4,offsetY:4,blur:5,color:Color.parse('rgba(0,0,0,1)')}],fontSize:36,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":0,"left":0,"right":0,"bottom":0},verticalAlignment:"middle",maxRows:0,textOverflow:"shrink",characterSpacing:0,lineHeight:1,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"BET",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"FAST",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"newline",style:{},content:"\n",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{textColor:Color.parse('rgba(255,220,38,1)'),},content:"WIN",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{textColor:Color.parse('rgba(255,220,38,1)'),},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{textColor:Color.parse('rgba(255,220,38,1)'),},content:"BIG",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},assetId:'63e10f336224cd6b6340dbfd'},{kind:'image',id:'cde53b20-7258-4463-983a-a5f795183430',time:0,hidden:false,duration:12,animations:[],states:[],actions:[],x:5,y:-35,width:144,height:143,radius:{"type":"joint","topLeft":0,"topRight":0,"bottomRight":0,"bottomLeft":0},originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{},imageSettings:{x:0.5,y:0.5,quality:85,sizeMode:"fit",highDpi:false},imageAsset:{id:"720896",url:"https://c.bannerflow.net/accounts/soft2bet/63e10827ee6588a96cb203e2/images/718978cb-1bbe-46c8-84f6-ca71404c593b.svg",width:150,height:50}},{kind:'image',id:'e456a56c-5d26-44ae-a5b8-3114484d2536',time:0.01,hidden:false,duration:11.99,animations:[{id:'de3a2c4b-54fd-41ab-9afa-23537950f720',type:'in',timingFunction:'easeOutExpo',templateId:'scale-in',keyframes:[{id:"d5787bcb-f82c-4e3b-b3c6-b2b3dc29a82e",stateId:"5019ddcf-03ca-49c3-a4d2-61e68b206f2c",time:0,timingFunction:undefined,duration:0},{id:"37f77eb5-2bda-4998-8115-9f9a583434a8",stateId:undefined,time:1.51,timingFunction:"@timingFunction",duration:0}]},{id:'6e036361-4f18-45e0-a7d9-34c7bbfd3b7f',type:'out',timingFunction:'easeInExpo',templateId:'scale-out',keyframes:[{id:"860279ba-0c5f-4b29-a201-aed93b2d697b",stateId:undefined,time:10.48,timingFunction:undefined,duration:0},{id:"ef63d6e5-2943-4dcc-968e-c36e4e43cb60",stateId:"fc1f1e9b-ed94-4029-b7da-bb40366887f1",time:11.99,timingFunction:"@timingFunction",duration:0}]},{id:'63c7a7a3-f78f-459a-a97e-a8b172114862',type:'keyframe',timingFunction:'easeInOutCubic',keyframes:[{id:"1db01dbc-91cc-454d-86ae-2834fa8f2b65",stateId:"fd7afa7f-fdf7-4805-9260-2c31f144548e",time:0,timingFunction:"easeInOutCubic",duration:0},{id:"6e2c66b0-c4c6-48d7-b2e5-5d583b67d7b2",stateId:"c793604e-d378-41e0-9527-c5c380917020",time:1.51,timingFunction:"easeInOutCubic",duration:0},{id:"93f5729c-c7d3-4351-89bc-5cd0bf0c85a4",stateId:"88df5701-377b-4c67-a6b6-4fe5f9773198",time:3.01,timingFunction:"easeInOutCubic",duration:0},{id:"3856d06c-462d-4a0e-9f1d-14e76996ff01",stateId:"ab2faa82-75b5-4520-840e-9d5b622c9b81",time:4.5,timingFunction:"easeInOutCubic",duration:0},{id:"4b3dc5d3-f28a-4e43-b0c6-badb0a755277",stateId:"88ee5556-c402-408a-8a22-9b0066751256",time:6.01,timingFunction:"easeInOutCubic",duration:0},{id:"1a868ffd-fa7d-41ca-8164-d991c289c65c",stateId:"dd9eb14d-f859-4ed7-a3c8-50501c0a9127",time:7.51,timingFunction:"easeInOutCubic",duration:0},{id:"bfa7c400-9525-4b72-9f02-eeb69ef8f389",stateId:"9bcd7b11-84f7-4225-a421-ebd0379899c0",time:9.02,timingFunction:"easeInOutCubic",duration:0},{id:"df805a1e-ed24-4e3f-893e-f8bd07935e5d",stateId:"a6533706-4ab6-4758-a156-af2bc33e582c",time:10.5,timingFunction:"easeInOutCubic",duration:0},{id:"555e6d90-d5cc-47bd-b506-b2fe86cfbca1",stateId:"ea89ace5-2195-43c6-a33e-5a728dee0e4e",time:11.99,timingFunction:"easeInOutCubic",duration:0}]},],states:[{id:'ea89ace5-2195-43c6-a33e-5a728dee0e4e',scaleX:0.95,scaleY:0.95,},{id:'fd7afa7f-fdf7-4805-9260-2c31f144548e',scaleX:0.95,scaleY:0.95,},{id:'c793604e-d378-41e0-9527-c5c380917020',scaleX:1.05,scaleY:1.05,},{id:'88df5701-377b-4c67-a6b6-4fe5f9773198',scaleX:0.95,scaleY:0.95,},{id:'ab2faa82-75b5-4520-840e-9d5b622c9b81',scaleX:1.05,scaleY:1.05,},{id:'88ee5556-c402-408a-8a22-9b0066751256',scaleX:0.95,scaleY:0.95,},{id:'dd9eb14d-f859-4ed7-a3c8-50501c0a9127',scaleX:1.05,scaleY:1.05,},{id:'9bcd7b11-84f7-4225-a421-ebd0379899c0',scaleX:0.95,scaleY:0.95,},{id:'a6533706-4ab6-4758-a156-af2bc33e582c',scaleX:1.05,scaleY:1.05,},{id:'5019ddcf-03ca-49c3-a4d2-61e68b206f2c',scaleX:0,scaleY:0,},{id:'fc1f1e9b-ed94-4029-b7da-bb40366887f1',scaleX:0,scaleY:0,},],actions:[],x:566,y:-73,width:158,height:238,radius:{"type":"joint","topLeft":0,"topRight":0,"bottomRight":0,"bottomLeft":0},originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{},imageSettings:{x:0.5,y:0.5,quality:85,sizeMode:"fit",highDpi:false},imageAsset:{id:"737079",url:"https://c.bannerflow.net/accounts/soft2bet/63e10827ee6588a96cb203e2/images/09291d06-dcf8-4ae0-b158-1f92bc0025ca.png",width:516,height:185}},{kind:'button',id:'3f6d0415-f159-481a-82d8-291f35a5ffba',time:0.01,hidden:false,duration:11.99,animations:[{id:'39b11d4c-1e49-4321-a291-60df31ac7b4c',type:'in',timingFunction:'easeOutExpo',templateId:'scale-in',keyframes:[{id:"15a7c84c-3eba-4267-9f47-a8cc8c2f1d25",stateId:"4b7ed0ed-4995-4e75-89ff-0a842b8ced5e",time:0,timingFunction:undefined,duration:0},{id:"01dbf9ed-7142-4cf5-923f-625066688be5",stateId:undefined,time:1.51,timingFunction:"@timingFunction",duration:0}]},{id:'d8e00b16-80bf-4d2f-aaa2-c8c68176833c',type:'out',timingFunction:'easeInExpo',templateId:'scale-out',keyframes:[{id:"27264eb0-e9dd-4b05-93f1-8db3ab87e0ad",stateId:undefined,time:10.48,timingFunction:undefined,duration:0},{id:"420d9658-9940-4f42-8b01-8946527f053b",stateId:"02bf17fc-4e68-4c6b-8319-0573750fa740",time:11.99,timingFunction:"@timingFunction",duration:0}]},{id:'22770cee-0d1d-4069-9ac0-f6affa8042aa',type:'keyframe',timingFunction:'easeInOutCubic',keyframes:[{id:"aa58ae96-bdc1-4069-a41b-29c0c792cf32",stateId:"59c527b6-8280-4137-9974-57b3c6cf0d9d",time:0,timingFunction:"easeInOutCubic",duration:0},{id:"4ac5aadd-3601-41cb-af84-1f679741c0e0",stateId:"c51d1161-b772-4c53-a7d0-ac8246f72806",time:1.51,timingFunction:"easeInOutCubic",duration:0},{id:"6e0eff43-4118-42ea-8f9f-2df1e5af2205",stateId:"924e9d56-4ce5-41b3-bba5-dbd0fb3b8034",time:3.01,timingFunction:"easeInOutCubic",duration:0},{id:"7d0cee30-456a-4329-b201-6a8f29c601af",stateId:"20fd1594-a5f5-40f5-ab82-85596894541a",time:4.48,timingFunction:"easeInOutCubic",duration:0},{id:"ba0b0c54-9859-4f1e-8e04-f0d1f4c3981e",stateId:"2f4db6e9-75f6-4068-9a18-13f01c1bc826",time:5.98,timingFunction:"easeInOutCubic",duration:0},{id:"a9bb5ae5-7dc2-42df-a808-64f093967deb",stateId:"ccff6fd3-78e3-4a60-84b2-033d6724fd24",time:7.47,timingFunction:"easeInOutCubic",duration:0},{id:"7874f148-2431-43ad-9a03-222f97206a84",stateId:"2d3f64ba-8b1a-4025-a629-05fd8fdbfcf2",time:8.98,timingFunction:"easeInOutCubic",duration:0},{id:"dcb7a034-f857-493d-8c2e-2124eb9d8385",stateId:"9597d33f-9648-4bd9-90d8-66d6ca17907e",time:10.48,timingFunction:"easeInOutCubic",duration:0},{id:"474cff17-f25f-4f17-b0d8-dc0bd10f2835",stateId:"1722d076-0647-480d-9ad5-fa7a63abf7f4",time:11.99,timingFunction:"easeInOutCubic",duration:0}]},],states:[{id:'59c527b6-8280-4137-9974-57b3c6cf0d9d',scaleX:0.95,scaleY:0.95,},{id:'c51d1161-b772-4c53-a7d0-ac8246f72806',scaleX:1.05,scaleY:1.05,},{id:'924e9d56-4ce5-41b3-bba5-dbd0fb3b8034',scaleX:0.95,scaleY:0.95,},{id:'20fd1594-a5f5-40f5-ab82-85596894541a',scaleX:1.05,scaleY:1.05,},{id:'2f4db6e9-75f6-4068-9a18-13f01c1bc826',scaleX:0.95,scaleY:0.95,},{id:'2d3f64ba-8b1a-4025-a629-05fd8fdbfcf2',scaleX:0.95,scaleY:0.95,},{id:'ccff6fd3-78e3-4a60-84b2-033d6724fd24',scaleX:1.05,scaleY:1.05,},{id:'9597d33f-9648-4bd9-90d8-66d6ca17907e',scaleX:1.05,scaleY:1.05,},{id:'1722d076-0647-480d-9ad5-fa7a63abf7f4',scaleX:0.95,scaleY:0.95,},{id:'4b7ed0ed-4995-4e75-89ff-0a842b8ced5e',scaleX:0,scaleY:0,},{id:'02bf17fc-4e68-4c6b-8319-0573750fa740',scaleX:0,scaleY:0,},],actions:[],x:579,y:9,width:128,height:75,radius:{"type":"joint","topLeft":3,"topRight":3,"bottomRight":3,"bottomLeft":3},originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{},textColor:Color.parse('rgba(255,255,255,1)'),textOverflow:"shrink",verticalAlignment:"middle",horizontalAlignment:"center",maxRows:1,lineHeight:1.3,padding:{"top":8,"left":8,"right":8,"bottom":8},characterSpacing:0,uppercase:true,underline:false,strikethrough:false,fontSize:18,characterStyles:new Map([]),content:{kind:0,style:{padding:{"top":8,"left":8,"right":8,"bottom":8},verticalAlignment:"middle",maxRows:1,textOverflow:"shrink",characterSpacing:0,lineHeight:1.3,__fontFamilyId:"",},spans:[{type:"word",style:{},content:"Scommetti",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"space",style:{},content:" ",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"word",style:{},content:"ora",width:0,height:0,lineHeight:0,left:0,attributes:{}},{type:"end",content:"END",width:0,height:0,lineHeight:0,left:0,attributes:{}},],},assetId:'63e10f336224cd6b6340dc00'},{kind:'widget',id:'6bd7d0a3-2bf3-4afc-b75f-e184927ea93c',time:2.71,hidden:false,duration:8.43,animations:[{id:'fb833469-10f1-443f-b8ac-30b6c7d236dc',type:'in',timingFunction:'linear',templateId:'fade-in',keyframes:[{id:"4cb3a321-14be-427a-ba4f-4d38372ad513",stateId:"7cfb7094-34f5-4bd7-ba5d-acfb38b3ad40",time:0,timingFunction:undefined,duration:0},{id:"6cc7cb02-d79f-42d6-aa81-a10eeedca085",stateId:undefined,time:0.75,timingFunction:"@timingFunction",duration:0}]},{id:'ada984a7-7ab3-4827-8e47-2b7e9569fa3b',type:'out',timingFunction:'linear',templateId:'fade-out',keyframes:[{id:"cbb81ca0-4e1e-4672-a2bc-b851265af008",stateId:undefined,time:8.03,timingFunction:undefined,duration:0},{id:"bf0fef55-82d2-42f5-bdb8-5241c4113fa1",stateId:"b9c39acb-5817-4255-b16e-0de32b625a6c",time:8.43,timingFunction:"@timingFunction",duration:0}]},],states:[{id:'7cfb7094-34f5-4bd7-ba5d-acfb38b3ad40',opacity:0,},{id:'b9c39acb-5817-4255-b16e-0de32b625a6c',opacity:0,},],actions:[],x:587,y:27,width:117,height:39,radius:{"type":"joint","topLeft":0,"topRight":0,"bottomRight":0,"bottomLeft":0},originX:0.5,originY:0.5,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,mirrorX:false,mirrorY:false,opacity:1,filters:{},html:"PGRpdiBpZD0id2lkZ2V0Q29udGFpbmVyIiBjbGFzcz0id2lkZ2V0LWNvbnRhaW5lciI+CiAgICA8Y2FudmFzIGlkPSJjYW52YXMiIGNsYXNzPSJjYW52YXMiPjwvY2FudmFzPgo8L2Rpdj4=",css:"KiwqOmJlZm9yZSwqOmFmdGVyIHsKICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAKICBwYWRkaW5nOiAwOwogIG1hcmdpbjogMDsKCiAgcG9pbnRlci1ldmVudHM6IG5vbmU7Cn0KLndpZGdldC1jb250YWluZXIgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwcHg7CiAgbGVmdDogMHB4OwogIG92ZXJmbG93OiBoaWRkZW47Cn0KLmNhbnZhcyB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMHB4OwogIGxlZnQ6IDBweDsKfQ==",js:"V2lkZ2V0Lm1vdXNlSW50ZXJhY3Rpb25zID0gZmFsc2U7DQpsZXQgcGF1c2UgPSB0cnVlOw0KbGV0IHRpbWVvdXQ7DQpsZXQgZmlyc3RTdGFydCA9IHRydWU7DQpsZXQgcHJvbWlzZVJlc29sdmVyOw0KV2lkZ2V0LmlzTG9hZGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICBwcm9taXNlUmVzb2x2ZXIgPSByZXNvbHZlOw0KfSk7DQpmdW5jdGlvbiBnZXQoZWwpIHsNCiAgICBpZiAodHlwZW9mIGVsID09PSAic3RyaW5nIikgew0KICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpOw0KICAgIH0NCiAgICByZXR1cm4gZWw7DQp9DQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCmxldCBTaGluZUVmZmVjdCA9IChmdW5jdGlvbiAoKSB7DQogICAgbGV0IGNvbnRhaW5lciA9IGdldCgnd2lkZ2V0Q29udGFpbmVyJyk7DQogICAgbGV0IGNhbnZhcyA9IGdldCgnY2FudmFzJyk7DQogICAgbGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOw0KICAgIGxldCBjb250YWluZXJXaWR0aCwgY29udGFpbmVySGVpZ2h0Ow0KICAgIGxldCBpc1J1bm5pbmcgPSBmYWxzZTsNCiAgICBsZXQgaXNTdG9wID0gZmFsc2U7DQogICAgbGV0IGdyYWRpZW50Ow0KICAgIGxldCBza2V3LCBtYXhTa2V3ID0gMC41OyAvLyBtYXhTa2V3IGlzIHNrZXcgb2YgMzAgZGVncmVlIC0gc2tldyB3aWxsIGJlIHVzZWQgdG8gY2FsY3VsYXRlIG9mIHJvdGF0aW5nIGFuZ2xlICggPSBNYXRoLmF0YWcoc2tld1ZhbHVlKSk2DQogICAgbGV0IHN0YXJ0WCwgZGVsdGFYLCBjdXJyZW50WCwgZW5kWCwgdGltZW91dFZhbHVlLCB0aW1lb3V0Ow0KICAgIGxldCBzdGFydENvbG9yLCBjZW50ZXJDb2xvcjsNCiAgICAvKi0tLSBzZXR0aW5ncyBmcm9tIGJhbm5lciBmbG93IC0tLSovDQogICAgbGV0IGR1cmF0aW9uOw0KICAgIGxldCBzaXplOw0KICAgIGxldCBjb2xvcjsNCiAgICBsZXQgaXNSZXBlYXQ7DQogICAgbGV0IGRlbGF5UmVwZWF0Ow0KICAgIGxldCBkaXJlY3Rpb25Gcm9tOw0KICAgIGxldCBkaXJlY3Rpb25Ta2V3Ow0KICAgIGxldCBhbmdsZVJvdGF0ZTsNCiAgICBsZXQgcmFkaXVzOw0KICAgIGxldCBzdG9wV2hlbkRvbmUgPSBmYWxzZTsNCiAgICBmdW5jdGlvbiBydW5BbmltYXRpb24oKSB7DQogICAgICAgIGlmICh0aW1lb3V0KSB7DQogICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFwYXVzZSB8fCBUaW1lbGluZS5pc1BsYXlpbmcpIHsNCiAgICAgICAgICAgIHJlZHJhd0NhbnZhcygpOw0KICAgICAgICAgICAgaWYgKChjdXJyZW50WCA+IGVuZFggJiYgZGlyZWN0aW9uU2tldyA9PSAtMSkgfHwgKGN1cnJlbnRYIDwgZW5kWCAmJiBkaXJlY3Rpb25Ta2V3ID09IDEpKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzUmVwZWF0ICYmICFzdG9wV2hlbkRvbmUpIHsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFggPSBzdGFydFg7DQogICAgICAgICAgICAgICAgICAgIGlmIChkZWxheVJlcGVhdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXVzZSB8fCBUaW1lbGluZS5pc1BsYXlpbmcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVuQW5pbWF0aW9uKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgZGVsYXlSZXBlYXQgKiAxMDAwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaXNSdW5uaW5nID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjdXJyZW50WCArPSBkZWx0YVg7DQogICAgICAgIH0NCiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgaWYgKHRpbWVvdXQpIHsNCiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIXBhdXNlIHx8IFRpbWVsaW5lLmlzUGxheWluZykgew0KICAgICAgICAgICAgICAgIHJ1bkFuaW1hdGlvbigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LCB0aW1lb3V0VmFsdWUpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBzZWVrQW5pbWF0aW9uKHRpbWUpIHsNCiAgICAgICAgbGV0IGxvb3BzUGFzc2VkID0gMDsNCiAgICAgICAgbGV0IGR1cmF0aW9uU2VjID0gZHVyYXRpb24gLyAxMDAwOw0KICAgICAgICBpZiAoaXNSZXBlYXQpIHsNCiAgICAgICAgICAgIGxvb3BzUGFzc2VkID0gTWF0aC5mbG9vcih0aW1lIC8gKGRlbGF5UmVwZWF0ICsgZHVyYXRpb25TZWMpKTsNCiAgICAgICAgfQ0KICAgICAgICBsZXQgYW5pbWF0aW9uSW50ZXJ2YWwgPSArKHRpbWUgLSAoKGRlbGF5UmVwZWF0ICsgZHVyYXRpb25TZWMpICogbG9vcHNQYXNzZWQpKS50b0ZpeGVkKDIpOw0KICAgICAgICBsZXQgZnJhbWVzUGxheWVkID0gTWF0aC5mbG9vcihhbmltYXRpb25JbnRlcnZhbCAqIDYwKTsNCiAgICAgICAgcmVzZXRBbmltYXRpb24oKTsNCiAgICAgICAgaWYgKGFuaW1hdGlvbkludGVydmFsID49IDApIHsNCiAgICAgICAgICAgIGlmIChhbmltYXRpb25JbnRlcnZhbCA8IGR1cmF0aW9uU2VjKSB7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmcmFtZXNQbGF5ZWQ7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50WCArPSBkZWx0YVg7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgY3VycmVudFggPSBzdGFydFg7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBjdXJyZW50WCA9IHN0YXJ0WDsNCiAgICAgICAgfQ0KICAgICAgICByZWRyYXdDYW52YXMoKTsNCiAgICB9DQogICAgZnVuY3Rpb24gcmVkcmF3Q2FudmFzKCkgew0KICAgICAgICBjYW52YXMuc3R5bGUuYm9yZGVyUmFkaXVzID0gcmFkaXVzICsgJ3B4JzsNCiAgICAgICAgY3R4LnNhdmUoKTsNCiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjb250YWluZXJXaWR0aCwgY29udGFpbmVySGVpZ2h0KTsNCiAgICAgICAgY3R4LnRyYW5zbGF0ZShjb250YWluZXJXaWR0aCAvIDIsIGNvbnRhaW5lckhlaWdodCAvIDIpOw0KICAgICAgICBjdHgudHJhbnNmb3JtKDEsIDAsIHNrZXcsIDEsIDAsIDApOw0KICAgICAgICBncmFkaWVudCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudChjdXJyZW50WCwgMCwgY3VycmVudFggKyBzaXplLCAwKTsNCiAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsIHN0YXJ0Q29sb3IpOw0KICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMC41LCBjZW50ZXJDb2xvcik7DQogICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCBzdGFydENvbG9yKTsNCiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50Ow0KICAgICAgICBjdHguZmlsbFJlY3QoY3VycmVudFgsIC1jb250YWluZXJIZWlnaHQgLyAyLCBzaXplLCBjb250YWluZXJIZWlnaHQpOw0KICAgICAgICBjdHgucmVzdG9yZSgpOw0KICAgIH0NCiAgICBmdW5jdGlvbiBzdGFydFdpZGdldCgpIHsNCiAgICAgICAgaWYgKCFjb250YWluZXJXaWR0aCB8fCAhY29udGFpbmVySGVpZ2h0KQ0KICAgICAgICAgICAgcmV0dXJuOyAvLyBjaGVjayBpZiB0aGUgd2lkZ2V0IGlzIGhpZGUNCiAgICAgICAgY2FudmFzLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBjb250YWluZXJXaWR0aCk7DQogICAgICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGNvbnRhaW5lckhlaWdodCk7DQogICAgICAgIC8vIENhbGN1bGF0ZSBjb2xvciBncmFkaWVudA0KICAgICAgICBjb2xvciA9IGNvbG9yLnN1YnN0cmluZygncmdiYSgnLmxlbmd0aCk7DQogICAgICAgIGNvbG9yID0gY29sb3Iuc3BsaXQoJywnKTsNCiAgICAgICAgc3RhcnRDb2xvciA9ICJyZ2JhKCIgKyBjb2xvclswXSArICIsIiArIGNvbG9yWzFdICsgIiwiICsgY29sb3JbMl0gKyAiLCAwKSI7DQogICAgICAgIGNlbnRlckNvbG9yID0gInJnYmEoIiArIGNvbG9yWzBdICsgIiwiICsgY29sb3JbMV0gKyAiLCIgKyBjb2xvclsyXSArICIsIDAuNykiOw0KICAgICAgICBza2V3ID0gTWF0aC50YW4oTWF0aC5QSSAqIGFuZ2xlUm90YXRlIC8gMTgwKTsgLy8gZ2V0IHJvdGF0ZSBhbmdsZSBmcm9tIHRoZSBzZXR0aW5nIHBhcmFtZXRlcg0KICAgICAgICAvLyBDYWxjdWxhdGUgc3RhcnRYIHRvIGRyYXcsIGVuZFggYW5kIHRpbWVvdXQgdmFsdWUNCiAgICAgICAgaWYgKGRpcmVjdGlvbkZyb20udG9Mb3dlckNhc2UoKSA9PSAibGVmdCIpIHsNCiAgICAgICAgICAgIHN0YXJ0WCA9IC0oc2l6ZSArIGNvbnRhaW5lcldpZHRoIC8gMikgLSBza2V3ICogY29udGFpbmVySGVpZ2h0IC8gMjsNCiAgICAgICAgICAgIGVuZFggPSBjb250YWluZXJXaWR0aCAvIDIgKyBza2V3ICogY29udGFpbmVySGVpZ2h0IC8gMjsNCiAgICAgICAgICAgIGlmIChza2V3IDwgMCkgew0KICAgICAgICAgICAgICAgIHN0YXJ0WCA9IC0oc2l6ZSArIGNvbnRhaW5lcldpZHRoIC8gMikgKyBza2V3ICogY29udGFpbmVySGVpZ2h0IC8gMjsNCiAgICAgICAgICAgICAgICBlbmRYID0gY29udGFpbmVyV2lkdGggLyAyIC0gc2tldyAqIGNvbnRhaW5lckhlaWdodCAvIDI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBkaXJlY3Rpb25Ta2V3ID0gLTE7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uRnJvbS50b0xvd2VyQ2FzZSgpID09ICJyaWdodCIpIHsNCiAgICAgICAgICAgIHN0YXJ0WCA9IGNvbnRhaW5lcldpZHRoIC8gMiArIHNrZXcgKiBjb250YWluZXJIZWlnaHQgLyAyOw0KICAgICAgICAgICAgZW5kWCA9IC0oc2l6ZSArIGNvbnRhaW5lcldpZHRoIC8gMikgLSBza2V3ICogY29udGFpbmVySGVpZ2h0IC8gMjsNCiAgICAgICAgICAgIGlmIChza2V3IDwgMCkgew0KICAgICAgICAgICAgICAgIHN0YXJ0WCA9IGNvbnRhaW5lcldpZHRoIC8gMiAtIHNrZXcgKiBjb250YWluZXJIZWlnaHQgLyAyOw0KICAgICAgICAgICAgICAgIGVuZFggPSAtKHNpemUgKyBjb250YWluZXJXaWR0aCAvIDIpICsgc2tldyAqIGNvbnRhaW5lckhlaWdodCAvIDI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBkaXJlY3Rpb25Ta2V3ID0gMTsNCiAgICAgICAgfQ0KICAgICAgICBkdXJhdGlvbiAqPSAxMDAwIC8gMjsNCiAgICAgICAgdGltZW91dFZhbHVlID0gMTc7DQogICAgICAgIGRlbHRhWCA9IChlbmRYIC0gc3RhcnRYKSAvIChkdXJhdGlvbiAvIHRpbWVvdXRWYWx1ZSk7DQogICAgICAgIGN1cnJlbnRYID0gc3RhcnRYOw0KICAgICAgICAvLyBSdW4gYW5pbWF0aW9uDQogICAgICAgIGlzUnVubmluZyA9IHRydWU7DQogICAgICAgIHJ1bkFuaW1hdGlvbigpOw0KICAgICAgICBwcm9taXNlUmVzb2x2ZXIoKTsNCiAgICB9DQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICAvKj09PT09IFN0YXJ0IHBvaW50IG9mIGFuaW1hdGlvbiAgPT09PT0qLw0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogICAgZnVuY3Rpb24gcmVsb2FkR2xvYmFsVmFyaWFibGVzKCkgew0KICAgICAgICBjb250YWluZXJXaWR0aCA9IHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNvbnRhaW5lcikuZ2V0UHJvcGVydHlWYWx1ZSgnd2lkdGgnKSk7DQogICAgICAgIGNvbnRhaW5lckhlaWdodCA9IHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNvbnRhaW5lcikuZ2V0UHJvcGVydHlWYWx1ZSgnaGVpZ2h0JykpOw0KICAgIH0NCiAgICBUaW1lbGluZS5vbihUaW1lbGluZUV2ZW50LlN0b3AsICgpID0+IHsNCiAgICAgICAgaWYgKFdpZGdldCAmJiBXaWRnZXQucHJvcGVydGllcy5zdG9wV2l0aENyZWF0aXZlKSB7DQogICAgICAgICAgICBzdG9wV2hlbkRvbmUgPSB0cnVlOw0KICAgICAgICB9DQogICAgfSk7DQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICAvKj09PT09IERlZmF1bHQgc2V0dGluZ3MgZnJvbSBCYW5uZXIgRmxvdyAgPT09PT0qLw0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogICAgZnVuY3Rpb24gbG9hZFNldHRpbmdzKCkgew0KICAgICAgICByYWRpdXMgPSBXaWRnZXQucHJvcGVydGllcy5ib3JkZXJSYWRpdXM7DQogICAgICAgIHNpemUgPSBXaWRnZXQucHJvcGVydGllcy5zaXplOw0KICAgICAgICBjb2xvciA9IFdpZGdldC5wcm9wZXJ0aWVzLnNoaW5lQ29sb3I7DQogICAgICAgIGR1cmF0aW9uID0gV2lkZ2V0LnByb3BlcnRpZXMuRHVyYXRpb247DQogICAgICAgIGlmIChkdXJhdGlvbiA9PSAwKSB7DQogICAgICAgICAgICBkdXJhdGlvbiA9IDE7DQogICAgICAgIH0NCiAgICAgICAgaXNSZXBlYXQgPSBXaWRnZXQucHJvcGVydGllcy5pc1JlcGVhdDsNCiAgICAgICAgZGVsYXlSZXBlYXQgPSBXaWRnZXQucHJvcGVydGllcy5kZWxheVJlcGVhdDsNCiAgICAgICAgZGlyZWN0aW9uRnJvbSA9IFdpZGdldC5wcm9wZXJ0aWVzLmRpcmVjdGlvbkZyb207DQogICAgICAgIGFuZ2xlUm90YXRlID0gV2lkZ2V0LnByb3BlcnRpZXMuYW5nbGVSb3RhdGU7DQogICAgICAgIGxldCBhbmdsZVJvdGF0ZVdpdGg5MCA9IGFuZ2xlUm90YXRlIC8gOTA7DQogICAgICAgIGlmIChhbmdsZVJvdGF0ZSAlIDkwID09IDAgJiYgYW5nbGVSb3RhdGVXaXRoOTAgJSAyICE9IDApIHsNCiAgICAgICAgICAgIGFuZ2xlUm90YXRlID0gMDsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIGxldCB0aW1lb3V0U3RhcnQ7DQogICAgbGV0IHNlc3Npb25JZCA9IDA7DQogICAgZnVuY3Rpb24gaW5pdCgpIHsNCiAgICAgICAgbG9hZFNldHRpbmdzKCk7DQogICAgICAgIHJlbG9hZEdsb2JhbFZhcmlhYmxlcygpOw0KICAgICAgICBzdGFydFdpZGdldCgpOw0KICAgIH0NCiAgICBsZXQgaXNTdGFydEFuaW1hdGlvbiA9IGZhbHNlOw0KICAgIGZ1bmN0aW9uIG9uU3RhcnQoKSB7DQogICAgICAgIGluaXQoKTsNCiAgICB9DQogICAgZnVuY3Rpb24gb25SZXNpemUoKSB7DQogICAgICAgIGluaXQoKTsNCiAgICB9DQogICAgZnVuY3Rpb24gcmVzZXRQYXJhbWV0ZXIoKSB7DQogICAgICAgIGluaXQoKTsNCiAgICB9DQogICAgZnVuY3Rpb24gcmVzZXRBbmltYXRpb24oKSB7DQogICAgICAgIGN1cnJlbnRYID0gc3RhcnRYOw0KICAgIH0NCiAgICByZXR1cm4gew0KICAgICAgICBzdGFydDogb25TdGFydCwNCiAgICAgICAgb25SZXNpemVkOiBvblJlc2l6ZSwNCiAgICAgICAgb25TZXR0aW5nQ2hhbmdlZDogcmVzZXRQYXJhbWV0ZXIsDQogICAgICAgIHJ1bjogcnVuQW5pbWF0aW9uLA0KICAgICAgICByZXNldDogcmVzZXRBbmltYXRpb24sDQogICAgICAgIHNlZWs6IHNlZWtBbmltYXRpb24NCiAgICB9Ow0KfSkoKTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5SZXNpemUsICgpID0+IHsNCiAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgcGF1c2UgPSBmYWxzZTsNCiAgICB9DQogICAgU2hpbmVFZmZlY3Qub25SZXNpemVkKCk7DQogICAgaWYgKHRpbWVvdXQpIHsNCiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOw0KICAgIH0NCiAgICBpZiAoQ3JlYXRpdmUuZW52aXJvbm1lbnQgPT09ICdkZXNpZ24tdmlldycpIHsNCiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcGF1c2UgPSB0cnVlOw0KICAgICAgICB9LCAzMDAwKTsNCiAgICB9DQp9KTsNCldpZGdldC5vbihXaWRnZXRFdmVudC5Qcm9wZXJ0eUNoYW5nZWQsICgpID0+IHsNCiAgICBwYXVzZSA9IGZhbHNlOw0KICAgIFNoaW5lRWZmZWN0Lm9uU2V0dGluZ0NoYW5nZWQoKTsNCiAgICBpZiAodGltZW91dCkgew0KICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7DQogICAgfQ0KICAgIGlmIChDcmVhdGl2ZS5lbnZpcm9ubWVudCA9PT0gJ2Rlc2lnbi12aWV3Jykgew0KICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBwYXVzZSA9IHRydWU7DQogICAgICAgIH0sIDMwMDApOw0KICAgIH0NCiAgICBlbHNlIHsNCiAgICAgICAgcGF1c2UgPSB0cnVlOw0KICAgIH0NCn0pOw0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5QYXVzZSwgKCkgPT4gew0KICAgIHBhdXNlID0gdHJ1ZTsNCn0pOw0KVGltZWxpbmUub24oVGltZWxpbmVFdmVudC5TdG9wLCAoKSA9PiB7DQogICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLnN0b3BXaXRoQ3JlYXRpdmUpIHsNCiAgICAgICAgU2hpbmVFZmZlY3QucmVzZXQoKTsNCiAgICAgICAgcGF1c2UgPSB0cnVlOw0KICAgIH0NCiAgICBlbHNlIHsNCiAgICAgICAgcGF1c2UgPSBmYWxzZTsNCiAgICB9DQp9KTsNClRpbWVsaW5lLm9uKFRpbWVsaW5lRXZlbnQuTG9vcCwgKCkgPT4gew0KICAgIGlmIChXaWRnZXQucHJvcGVydGllcy5sb29wV2l0aENyZWF0aXZlKSB7DQogICAgICAgIFNoaW5lRWZmZWN0LnJlc2V0KCk7DQogICAgICAgIFNoaW5lRWZmZWN0LnN0YXJ0KCk7DQogICAgfQ0KfSk7DQpUaW1lbGluZS5vbihUaW1lbGluZUV2ZW50LlBsYXksICgpID0+IHsNCiAgICBwYXVzZSA9IGZhbHNlOw0KICAgIFNoaW5lRWZmZWN0LnJ1bigpOw0KfSk7DQpUaW1lbGluZS5vbihUaW1lbGluZUV2ZW50LlNlZWssICh0aW1lKSA9PiB7DQogICAgaWYgKFRpbWVsaW5lLmN1cnJlbnRUaW1lID49IFdpZGdldC50aW1lICYmIFRpbWVsaW5lLmN1cnJlbnRUaW1lIDw9IFdpZGdldC5kdXJhdGlvbiArIFdpZGdldC50aW1lKSB7DQogICAgICAgIGxldCBlbGFwc2VkVGltZSA9IFRpbWVsaW5lLmN1cnJlbnRUaW1lIC0gV2lkZ2V0LnRpbWU7DQogICAgICAgIFNoaW5lRWZmZWN0LnNlZWsoZWxhcHNlZFRpbWUpOw0KICAgIH0NCn0pOw0KV2lkZ2V0Lm9uKFdpZGdldEV2ZW50LkFuaW1hdGlvblN0YXJ0LCAoKSA9PiB7DQogICAgaWYgKFdpZGdldC5wcm9wZXJ0aWVzLmxvb3BXaXRoQ3JlYXRpdmUgfHwgZmlyc3RTdGFydCkgew0KICAgICAgICBmaXJzdFN0YXJ0ID0gZmFsc2U7DQogICAgICAgIFNoaW5lRWZmZWN0LnJlc2V0KCk7DQogICAgICAgIFNoaW5lRWZmZWN0LnN0YXJ0KCk7DQogICAgICAgIHBhdXNlID0gZmFsc2U7DQogICAgfQ0KfSk7DQo=",customProperties:[{label:"Shine color",name:"shineColor",unit:"color",value:"rgba(255,255,255,1)",versionPropertyId:undefined},{label:"Size",name:"size",unit:"number",value:20,versionPropertyId:undefined},{label:"Direction from",name:"directionFrom",unit:"select",value:"W3sidmFsdWUiOiJMZWZ0Iiwic2VsZWN0ZWQiOnRydWV9LHsidmFsdWUiOiJSaWdodCIsInNlbGVjdGVkIjpmYWxzZX1d",versionPropertyId:undefined},{label:"Angle rotation",name:"angleRotate",unit:"number",value:0,versionPropertyId:undefined},{label:"Duration",name:"Duration",unit:"number",value:1,versionPropertyId:undefined},{label:"Border radius",name:"borderRadius",unit:"number",value:5,versionPropertyId:undefined},{label:"Repeat",name:"isRepeat",unit:"boolean",value:false,versionPropertyId:undefined},{label:"Delay repeat",name:"delayRepeat",unit:"number",value:2,versionPropertyId:undefined},{label:"Loop with creative",name:"loopWithCreative",unit:"boolean",value:false,versionPropertyId:undefined},{label:"Stop with creative",name:"stopWithCreative",unit:"boolean",value:false,versionPropertyId:undefined}],}]};return{env,data,preloadAssets};});